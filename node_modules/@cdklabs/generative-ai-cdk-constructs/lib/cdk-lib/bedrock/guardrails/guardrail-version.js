"use strict";
/**
 *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License"). You may not use this file except in compliance
 *  with the License. A copy of the License is located at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  or in the 'license' file accompanying this file. This file is distributed on an 'AS IS' BASIS, WITHOUT WARRANTIES
 *  OR CONDITIONS OF ANY KIND, express or implied. See the License for the specific language governing permissions
 *  and limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.GuardrailVersion = exports.GuardrailVersionBase = void 0;
const aws_cdk_lib_1 = require("aws-cdk-lib");
const aws_bedrock_1 = require("aws-cdk-lib/aws-bedrock");
const helpers_internal_1 = require("aws-cdk-lib/core/lib/helpers-internal");
const guardrails_1 = require("./guardrails");
/******************************************************************************
 *                        ABSTRACT BASE CLASS
 *****************************************************************************/
/**
 * Abstract base class for a Guardrail Version.
 * Contains methods and attributes valid for Guardrail Versions either created
 * with CDK or imported.
 */
class GuardrailVersionBase extends aws_cdk_lib_1.Resource {
    constructor(scope, id) {
        super(scope, id);
    }
}
exports.GuardrailVersionBase = GuardrailVersionBase;
/******************************************************************************
 *                        NEW CONSTRUCT DEFINITION
 *****************************************************************************/
/**
 * Class to create a Guardrail Version with CDK.
 * @cloudformationResource AWS::Bedrock::GuardrailVersion
 */
class GuardrailVersion extends GuardrailVersionBase {
    /**
     * Import a Guardrail Version from its attributes.
     */
    static fromGuardrailVersionAttributes(scope, id, attrs) {
        class Import extends GuardrailVersionBase {
            constructor() {
                super(...arguments);
                this.guardrail = guardrails_1.Guardrail.fromGuardrailAttributes(scope, `Guardrail-${id}`, {
                    guardrailArn: attrs.guardrailArn,
                    guardrailVersion: attrs.guardrailVersion,
                });
                this.guardrailVersion = attrs.guardrailVersion;
            }
        }
        return new Import(scope, id);
    }
    /**
     *
     */
    constructor(scope, id, props) {
        super(scope, id);
        this.guardrail = props.guardrail;
        // Compute hash from guardrail, to recreate the resource when guardrail has changed
        const hash = (0, helpers_internal_1.md5hash)(props.guardrail.lastUpdated ?? 'Default');
        this._resource = new aws_bedrock_1.CfnGuardrailVersion(this, `GuardrailVersion-${hash.slice(0, 16)}`, {
            guardrailIdentifier: this.guardrail.guardrailId,
            description: props.description,
        });
        this.guardrailVersion = this._resource.attrVersion;
    }
}
exports.GuardrailVersion = GuardrailVersion;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3VhcmRyYWlsLXZlcnNpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY2RrLWxpYi9iZWRyb2NrL2d1YXJkcmFpbHMvZ3VhcmRyYWlsLXZlcnNpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7OztHQVdHOzs7QUFFSCw2Q0FBa0Q7QUFDbEQseURBQThEO0FBQzlELDRFQUFnRTtBQUVoRSw2Q0FBcUQ7QUFxQnJEOzsrRUFFK0U7QUFFL0U7Ozs7R0FJRztBQUNILE1BQXNCLG9CQUFxQixTQUFRLHNCQUFRO0lBR3pELFlBQVksS0FBZ0IsRUFBRSxFQUFVO1FBQ3RDLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDbkIsQ0FBQztDQUNGO0FBTkQsb0RBTUM7QUE0Q0Q7OytFQUUrRTtBQUMvRTs7O0dBR0c7QUFDSCxNQUFhLGdCQUFpQixTQUFRLG9CQUFvQjtJQUN4RDs7T0FFRztJQUNJLE1BQU0sQ0FBQyw4QkFBOEIsQ0FDMUMsS0FBZ0IsRUFDaEIsRUFBVSxFQUNWLEtBQWlDO1FBRWpDLE1BQU0sTUFBTyxTQUFRLG9CQUFvQjtZQUF6Qzs7Z0JBQ2tCLGNBQVMsR0FBRyxzQkFBUyxDQUFDLHVCQUF1QixDQUFDLEtBQUssRUFBRSxhQUFhLEVBQUUsRUFBRSxFQUFFO29CQUN0RixZQUFZLEVBQUUsS0FBSyxDQUFDLFlBQVk7b0JBQ2hDLGdCQUFnQixFQUFFLEtBQUssQ0FBQyxnQkFBZ0I7aUJBQ3pDLENBQUMsQ0FBQztnQkFDYSxxQkFBZ0IsR0FBRyxLQUFLLENBQUMsZ0JBQWdCLENBQUM7WUFDNUQsQ0FBQztTQUFBO1FBQ0QsT0FBTyxJQUFJLE1BQU0sQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQVNEOztPQUVHO0lBQ0gsWUFBWSxLQUFnQixFQUFFLEVBQVUsRUFBRSxLQUE0QjtRQUNwRSxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ2pCLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQztRQUVqQyxtRkFBbUY7UUFDbkYsTUFBTSxJQUFJLEdBQUcsSUFBQSwwQkFBTyxFQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsV0FBVyxJQUFJLFNBQVMsQ0FBQyxDQUFDO1FBRS9ELElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxpQ0FBbUIsQ0FBQyxJQUFJLEVBQUUsb0JBQW9CLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDdEYsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXO1lBQy9DLFdBQVcsRUFBRSxLQUFLLENBQUMsV0FBVztTQUMvQixDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUM7SUFDckQsQ0FBQztDQUNGO0FBM0NELDRDQTJDQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogIENvcHlyaWdodCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpLiBZb3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiAgd2l0aCB0aGUgTGljZW5zZS4gQSBjb3B5IG9mIHRoZSBMaWNlbnNlIGlzIGxvY2F0ZWQgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqICBvciBpbiB0aGUgJ2xpY2Vuc2UnIGZpbGUgYWNjb21wYW55aW5nIHRoaXMgZmlsZS4gVGhpcyBmaWxlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFU1xuICogIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXG4gKiAgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IElSZXNvdXJjZSwgUmVzb3VyY2UgfSBmcm9tICdhd3MtY2RrLWxpYic7XG5pbXBvcnQgeyBDZm5HdWFyZHJhaWxWZXJzaW9uIH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWJlZHJvY2snO1xuaW1wb3J0IHsgbWQ1aGFzaCB9IGZyb20gJ2F3cy1jZGstbGliL2NvcmUvbGliL2hlbHBlcnMtaW50ZXJuYWwnO1xuaW1wb3J0IHsgQ29uc3RydWN0IH0gZnJvbSAnY29uc3RydWN0cyc7XG5pbXBvcnQgeyBHdWFyZHJhaWwsIElHdWFyZHJhaWwgfSBmcm9tICcuL2d1YXJkcmFpbHMnO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENPTU1PTlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgR3VhcmRyYWlsIFZlcnNpb24sIGVpdGhlciBjcmVhdGVkIHdpdGggQ0RLIG9yIGltcG9ydGVkLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElHdWFyZHJhaWxWZXJzaW9uIGV4dGVuZHMgSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFRoZSBHdWFyZHJhaWwgdG8gd2hpY2ggdGhpcyB2ZXJzaW9uIGJlbG9uZ3MuXG4gICAqL1xuICByZWFkb25seSBndWFyZHJhaWw6IElHdWFyZHJhaWw7XG5cbiAgLyoqXG4gICAqIFRoZSBJRCBvZiB0aGUgZ3VhcmRyYWlsIHZlcnNpb24uXG4gICAqIEBleGFtcGxlIFwiMVwiXG4gICAqL1xuICByZWFkb25seSBndWFyZHJhaWxWZXJzaW9uOiBzdHJpbmc7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqICAgICAgICAgICAgICAgICAgICAgICAgQUJTVFJBQ1QgQkFTRSBDTEFTU1xuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKipcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGEgR3VhcmRyYWlsIFZlcnNpb24uXG4gKiBDb250YWlucyBtZXRob2RzIGFuZCBhdHRyaWJ1dGVzIHZhbGlkIGZvciBHdWFyZHJhaWwgVmVyc2lvbnMgZWl0aGVyIGNyZWF0ZWRcbiAqIHdpdGggQ0RLIG9yIGltcG9ydGVkLlxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgR3VhcmRyYWlsVmVyc2lvbkJhc2UgZXh0ZW5kcyBSZXNvdXJjZSBpbXBsZW1lbnRzIElHdWFyZHJhaWxWZXJzaW9uIHtcbiAgcHVibGljIGFic3RyYWN0IHJlYWRvbmx5IGd1YXJkcmFpbDogSUd1YXJkcmFpbDtcbiAgcHVibGljIGFic3RyYWN0IHJlYWRvbmx5IGd1YXJkcmFpbFZlcnNpb246IHN0cmluZztcbiAgY29uc3RydWN0b3Ioc2NvcGU6IENvbnN0cnVjdCwgaWQ6IHN0cmluZykge1xuICAgIHN1cGVyKHNjb3BlLCBpZCk7XG4gIH1cbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogICAgICAgICAgICAgICAgICAgICAgICBQUk9QUyBGT1IgTkVXIENPTlNUUlVDVFxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqXG4gKiBQcm9wZXJ0aWVzIGZvciBjcmVhdGluZyBhIENESy1NYW5hZ2VkIEd1YXJkcmFpbCBWZXJzaW9uLlxuICovXG5cbi8qKlxuICogUHJvcGVydGllcyBmb3IgY3JlYXRpbmcgYSBHdWFyZHJhaWwgVmVyc2lvbi5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHdWFyZHJhaWxWZXJzaW9uUHJvcHMge1xuICAvKipcbiAgICogVGhlIGd1YXJkcmFpbCB0byBjcmVhdGUgYSB2ZXJzaW9uIGZvci5cbiAgICovXG4gIHJlYWRvbmx5IGd1YXJkcmFpbDogSUd1YXJkcmFpbDtcbiAgLyoqXG4gICAqIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgZ3VhcmRyYWlsIHZlcnNpb24uXG4gICAqXG4gICAqIEBleGFtcGxlIFwiVGhpcyBpcyBhIGRlc2NyaXB0aW9uIG9mIHRoZSBndWFyZHJhaWwgdmVyc2lvbi5cIlxuICAgKiBAZGVmYXVsdCAtIE5vIGRlc2NyaXB0aW9uIGlzIHByb3ZpZGVkLlxuICAgKi9cbiAgcmVhZG9ubHkgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqICAgICAgICAgICAgICAgICAgICAgIEFUVFJTIEZPUiBJTVBPUlRFRCBDT05TVFJVQ1RcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKlxuICogQXR0cmlidXRlcyBuZWVkZWQgdG8gY3JlYXRlIGFuIGltcG9ydFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEd1YXJkcmFpbFZlcnNpb25BdHRyaWJ1dGVzIHtcbiAgLyoqXG4gICAqIFRoZSBBUk4gb2YgdGhlIGd1YXJkcmFpbC5cbiAgICogQGV4YW1wbGUgXCJhcm46YXdzOmJlZHJvY2s6dXMtZWFzdC0xOjEyMzQ1Njc4OTAxMjpndWFyZHJhaWwveXltcHpvMzk4aXBxXCJcbiAgICovXG4gIHJlYWRvbmx5IGd1YXJkcmFpbEFybjogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIElEIG9mIHRoZSBndWFyZHJhaWwgdmVyc2lvbi5cbiAgICogQGV4YW1wbGUgXCIxXCJcbiAgICovXG4gIHJlYWRvbmx5IGd1YXJkcmFpbFZlcnNpb246IHN0cmluZztcbn1cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqICAgICAgICAgICAgICAgICAgICAgICAgTkVXIENPTlNUUlVDVCBERUZJTklUSU9OXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKipcbiAqIENsYXNzIHRvIGNyZWF0ZSBhIEd1YXJkcmFpbCBWZXJzaW9uIHdpdGggQ0RLLlxuICogQGNsb3VkZm9ybWF0aW9uUmVzb3VyY2UgQVdTOjpCZWRyb2NrOjpHdWFyZHJhaWxWZXJzaW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBHdWFyZHJhaWxWZXJzaW9uIGV4dGVuZHMgR3VhcmRyYWlsVmVyc2lvbkJhc2Uge1xuICAvKipcbiAgICogSW1wb3J0IGEgR3VhcmRyYWlsIFZlcnNpb24gZnJvbSBpdHMgYXR0cmlidXRlcy5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZnJvbUd1YXJkcmFpbFZlcnNpb25BdHRyaWJ1dGVzKFxuICAgIHNjb3BlOiBDb25zdHJ1Y3QsXG4gICAgaWQ6IHN0cmluZyxcbiAgICBhdHRyczogR3VhcmRyYWlsVmVyc2lvbkF0dHJpYnV0ZXMsXG4gICk6IElHdWFyZHJhaWxWZXJzaW9uIHtcbiAgICBjbGFzcyBJbXBvcnQgZXh0ZW5kcyBHdWFyZHJhaWxWZXJzaW9uQmFzZSB7XG4gICAgICBwdWJsaWMgcmVhZG9ubHkgZ3VhcmRyYWlsID0gR3VhcmRyYWlsLmZyb21HdWFyZHJhaWxBdHRyaWJ1dGVzKHNjb3BlLCBgR3VhcmRyYWlsLSR7aWR9YCwge1xuICAgICAgICBndWFyZHJhaWxBcm46IGF0dHJzLmd1YXJkcmFpbEFybixcbiAgICAgICAgZ3VhcmRyYWlsVmVyc2lvbjogYXR0cnMuZ3VhcmRyYWlsVmVyc2lvbixcbiAgICAgIH0pO1xuICAgICAgcHVibGljIHJlYWRvbmx5IGd1YXJkcmFpbFZlcnNpb24gPSBhdHRycy5ndWFyZHJhaWxWZXJzaW9uO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEltcG9ydChzY29wZSwgaWQpO1xuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IGd1YXJkcmFpbDogSUd1YXJkcmFpbDtcbiAgcHVibGljIHJlYWRvbmx5IGd1YXJkcmFpbFZlcnNpb246IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB1bmRlcmx5aW5nIENmbkd1YXJkcmFpbFZlcnNpb24gcmVzb3VyY2UuXG4gICAqL1xuICBwcml2YXRlIHJlYWRvbmx5IF9yZXNvdXJjZTogQ2ZuR3VhcmRyYWlsVmVyc2lvbjtcblxuICAvKipcbiAgICpcbiAgICovXG4gIGNvbnN0cnVjdG9yKHNjb3BlOiBDb25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzOiBHdWFyZHJhaWxWZXJzaW9uUHJvcHMpIHtcbiAgICBzdXBlcihzY29wZSwgaWQpO1xuICAgIHRoaXMuZ3VhcmRyYWlsID0gcHJvcHMuZ3VhcmRyYWlsO1xuXG4gICAgLy8gQ29tcHV0ZSBoYXNoIGZyb20gZ3VhcmRyYWlsLCB0byByZWNyZWF0ZSB0aGUgcmVzb3VyY2Ugd2hlbiBndWFyZHJhaWwgaGFzIGNoYW5nZWRcbiAgICBjb25zdCBoYXNoID0gbWQ1aGFzaChwcm9wcy5ndWFyZHJhaWwubGFzdFVwZGF0ZWQgPz8gJ0RlZmF1bHQnKTtcblxuICAgIHRoaXMuX3Jlc291cmNlID0gbmV3IENmbkd1YXJkcmFpbFZlcnNpb24odGhpcywgYEd1YXJkcmFpbFZlcnNpb24tJHtoYXNoLnNsaWNlKDAsIDE2KX1gLCB7XG4gICAgICBndWFyZHJhaWxJZGVudGlmaWVyOiB0aGlzLmd1YXJkcmFpbC5ndWFyZHJhaWxJZCxcbiAgICAgIGRlc2NyaXB0aW9uOiBwcm9wcy5kZXNjcmlwdGlvbixcbiAgICB9KTtcblxuICAgIHRoaXMuZ3VhcmRyYWlsVmVyc2lvbiA9IHRoaXMuX3Jlc291cmNlLmF0dHJWZXJzaW9uO1xuICB9XG59XG4iXX0=