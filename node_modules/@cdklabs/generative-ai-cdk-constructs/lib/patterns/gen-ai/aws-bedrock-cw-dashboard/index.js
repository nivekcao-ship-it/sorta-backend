"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.BedrockCwDashboard = void 0;
const JSII_RTTI_SYMBOL_1 = Symbol.for("jsii.rtti");
/**
 *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License"). You may not use this file except in compliance
 *  with the License. A copy of the License is located at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  or in the 'license' file accompanying this file. This file is distributed on an 'AS IS' BASIS, WITHOUT WARRANTIES
 *  OR CONDITIONS OF ANY KIND, express or implied. See the License for the specific language governing permissions
 *  and limitations under the License.
 */
const aws_cdk_lib_1 = require("aws-cdk-lib");
const aws_cloudwatch_1 = require("aws-cdk-lib/aws-cloudwatch");
const constructs_1 = require("constructs");
const bedrock_1 = require("../../../cdk-lib/bedrock");
/**
 * The BedrockCwDashboard class.
 */
class BedrockCwDashboard extends constructs_1.Construct {
    /**
     * Constructs a new instance of the BedrockCwDashboard class.
     * @param {cdk.App} scope - represents the scope for all the resources.
     * @param {string} id - this is a a scope-unique id.
     * @param {BedrockCwDashboardProps} props - user provided props for the construct.
     * @since 0.0.0
     * @public
     */
    constructor(scope, id, props = {}) {
        super(scope, id);
        this.dashboard =
            props.existingDashboard ??
                new aws_cloudwatch_1.Dashboard(this, `BedrockMetricsDashboard${id}`, {
                    dashboardName: props.dashboardName ?? 'BedrockMetricsDashboard',
                });
        const cloudwatchDashboardURL = 'https://' +
            aws_cdk_lib_1.Aws.REGION +
            '.console.aws.amazon.com/cloudwatch/home?region=' +
            aws_cdk_lib_1.Aws.REGION +
            '#dashboards:name=' +
            this.dashboard.dashboardName;
        new aws_cdk_lib_1.CfnOutput(this, `BedrockMetricsDashboardOutput${id}`, {
            value: cloudwatchDashboardURL,
        });
    }
    /* Provide metrics for a specific model id in Bedrock
     * @param {string} modelName - Model name as it will appear in the dashboard row widget.
     * @param {string} modelId - Bedrock model id as defined in https://docs.aws.amazon.com/bedrock/latest/userguide/model-ids.html
     * @param {ModelMonitoringProps} props - user provided props for the monitoring.
     */
    addModelMonitoring(modelName, modelId, props = {}) {
        const period = props.period ?? aws_cdk_lib_1.Duration.hours(1);
        const outputImageCountDimension = modelId + props.imageSize + props.bucketedStepSize;
        const modelInputTokensMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'InputTokenCount',
            dimensionsMap: {
                ModelId: modelId,
            },
            statistic: aws_cloudwatch_1.Stats.SUM,
            period: period,
        });
        const modelOutputTokensMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'OutputTokenCount',
            dimensionsMap: {
                ModelId: modelId,
            },
            statistic: aws_cloudwatch_1.Stats.SUM,
            period: period,
        });
        const modelOutputImageMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'OutputImageCount',
            dimensionsMap: {
                ModelId: outputImageCountDimension,
            },
            statistic: aws_cloudwatch_1.Stats.SUM,
            period: period,
        });
        const modelLatencyAvgMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'InvocationLatency',
            dimensionsMap: {
                ModelId: modelId,
            },
            statistic: aws_cloudwatch_1.Stats.AVERAGE,
            period: period,
        });
        const modelLatencyMinMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'InvocationLatency',
            dimensionsMap: {
                ModelId: modelId,
            },
            statistic: aws_cloudwatch_1.Stats.MINIMUM,
            period: period,
        });
        const modelLatencyMaxMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'InvocationLatency',
            dimensionsMap: {
                ModelId: modelId,
            },
            statistic: aws_cloudwatch_1.Stats.MAXIMUM,
            period: period,
        });
        const modelInvocationsCountMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'Invocations',
            dimensionsMap: {
                ModelId: modelId,
            },
            statistic: aws_cloudwatch_1.Stats.SAMPLE_COUNT,
            period: period,
        });
        const modelInvocationsClientErrorsMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'InvocationClientErrors',
            dimensionsMap: {
                ModelId: modelId,
            },
            statistic: aws_cloudwatch_1.Stats.SAMPLE_COUNT,
            period: period,
        });
        const modelInvocationsServerErrorsMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'InvocationServerErrors',
            dimensionsMap: {
                ModelId: modelId,
            },
            statistic: aws_cloudwatch_1.Stats.SAMPLE_COUNT,
            period: period,
        });
        const modelInvocationsThrottlesErrorsMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'InvocationThrottles',
            dimensionsMap: {
                ModelId: modelId,
            },
            statistic: aws_cloudwatch_1.Stats.SAMPLE_COUNT,
            period: period,
        });
        const modelInvocationsLegacysMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'LegacyModelInvocations',
            dimensionsMap: {
                ModelId: modelId,
            },
            statistic: aws_cloudwatch_1.Stats.SAMPLE_COUNT,
            period: period,
        });
        this.dashboard.addWidgets(new aws_cloudwatch_1.Row(new aws_cloudwatch_1.TextWidget({
            markdown: `# ${modelName}`,
            width: 24,
        })));
        this.dashboard.addWidgets(new aws_cloudwatch_1.Row(new aws_cloudwatch_1.SingleValueWidget({
            title: 'Average Latency',
            metrics: [modelLatencyAvgMetric],
            width: 8,
        }), new aws_cloudwatch_1.SingleValueWidget({
            title: 'Min Latency',
            metrics: [modelLatencyMinMetric],
            width: 8,
        }), new aws_cloudwatch_1.SingleValueWidget({
            title: 'Max Latency',
            metrics: [modelLatencyMaxMetric],
            width: 8,
        })));
        let pricingWidget;
        if (props.inputTokenPrice && props.outputTokenPrice) {
            pricingWidget = new aws_cloudwatch_1.GraphWidget({
                title: 'Token Cost (USD)',
                left: [
                    new aws_cloudwatch_1.MathExpression({
                        expression: `inputTokens / 1000 * ${props.inputTokenPrice}`,
                        usingMetrics: {
                            inputTokens: modelInputTokensMetric,
                        },
                        label: 'Input Token Cost',
                    }),
                    new aws_cloudwatch_1.MathExpression({
                        expression: `outputTokens / 1000 * ${props.outputTokenPrice}`,
                        usingMetrics: {
                            outputTokens: modelOutputTokensMetric,
                        },
                        label: 'Output Token Cost',
                    }),
                ],
                leftYAxis: {
                    label: 'Input and Output',
                    showUnits: false,
                },
                right: [
                    new aws_cloudwatch_1.MathExpression({
                        expression: `inputTokens / 1000 * ${props.inputTokenPrice} + outputTokens / 1000 * ${props.outputTokenPrice}`,
                        usingMetrics: {
                            inputTokens: modelInputTokensMetric,
                            outputTokens: modelOutputTokensMetric,
                        },
                        label: 'Total Cost',
                    }),
                ],
                rightYAxis: {
                    label: 'Total',
                    showUnits: false,
                },
                width: 12,
                height: 10,
            });
        }
        this.dashboard.addWidgets(new aws_cloudwatch_1.Row(new aws_cloudwatch_1.GraphWidget({
            title: 'Input and Output Token Counts',
            left: [modelInputTokensMetric],
            right: [modelOutputTokensMetric],
            period: period,
            width: 12,
            height: 10,
        }), ...(pricingWidget ? [pricingWidget] : [])));
        this.dashboard.addWidgets(new aws_cloudwatch_1.SingleValueWidget({
            title: 'Invocations',
            metrics: [modelInvocationsCountMetric],
            width: 4,
        }), new aws_cloudwatch_1.SingleValueWidget({
            title: 'Client Errors',
            metrics: [modelInvocationsClientErrorsMetric],
            width: 4,
        }), new aws_cloudwatch_1.SingleValueWidget({
            title: 'Server Errors',
            metrics: [modelInvocationsServerErrorsMetric],
            width: 4,
        }), new aws_cloudwatch_1.SingleValueWidget({
            title: 'Throttled invocations',
            metrics: [modelInvocationsThrottlesErrorsMetric],
            width: 4,
        }), new aws_cloudwatch_1.SingleValueWidget({
            title: 'Legacy invocations',
            metrics: [modelInvocationsLegacysMetric],
            width: 4,
        }), new aws_cloudwatch_1.SingleValueWidget({
            title: 'OutputImageCount',
            metrics: [modelOutputImageMetric],
            width: 4,
        }));
    }
    /* Add a new row to the dashboard providing metrics across all model ids in Bedrock
     * @param {ModelMonitoringProps} props - user provided props for the monitoring.
     */
    addAllModelsMonitoring(props = {}) {
        const period = props.period ?? aws_cdk_lib_1.Duration.hours(1);
        // Metrics across all Model Ids
        const inputTokensAllModelsMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'InputTokenCount',
            statistic: aws_cloudwatch_1.Stats.SUM,
            period: period,
        });
        const outputTokensAllModelsMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'OutputTokenCount',
            statistic: aws_cloudwatch_1.Stats.SUM,
            period: period,
        });
        const outputImageMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'OutputImageCount',
            statistic: aws_cloudwatch_1.Stats.SUM,
            period: period,
        });
        const latencyAvgAllModelsMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'InvocationLatency',
            statistic: aws_cloudwatch_1.Stats.AVERAGE,
            period: period,
        });
        const latencyMinAllModelsMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'InvocationLatency',
            statistic: aws_cloudwatch_1.Stats.MINIMUM,
            period: period,
        });
        const latencyMaxAllModelsMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'InvocationLatency',
            statistic: aws_cloudwatch_1.Stats.MAXIMUM,
            period: period,
        });
        const invocationsCountAllModelsMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'Invocations',
            statistic: aws_cloudwatch_1.Stats.SAMPLE_COUNT,
            period: period,
        });
        const invocationsClientErrorsAllModelsMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'InvocationClientErrors',
            statistic: aws_cloudwatch_1.Stats.SAMPLE_COUNT,
            period: period,
        });
        const invocationsServerErrorsAllModelsMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'InvocationServerErrors',
            statistic: aws_cloudwatch_1.Stats.SAMPLE_COUNT,
            period: period,
        });
        const invocationsThrottlesErrorsMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'InvocationThrottles',
            statistic: aws_cloudwatch_1.Stats.SAMPLE_COUNT,
            period: period,
        });
        const invocationsLegacyModelMetric = new aws_cloudwatch_1.Metric({
            namespace: 'AWS/Bedrock',
            metricName: 'LegacyModelInvocations',
            statistic: aws_cloudwatch_1.Stats.SAMPLE_COUNT,
            period: period,
        });
        this.dashboard.addWidgets(new aws_cloudwatch_1.Row(new aws_cloudwatch_1.TextWidget({
            markdown: '# Metrics Across All Models',
            width: 24,
        })));
        this.dashboard.addWidgets(new aws_cloudwatch_1.Row(new aws_cloudwatch_1.SingleValueWidget({
            title: 'Average Latency (All Models)',
            metrics: [latencyAvgAllModelsMetric],
            width: 8,
        }), new aws_cloudwatch_1.SingleValueWidget({
            title: 'Min Latency (All Models)',
            metrics: [latencyMinAllModelsMetric],
            width: 8,
        }), new aws_cloudwatch_1.SingleValueWidget({
            title: 'Max Latency (All Models)',
            metrics: [latencyMaxAllModelsMetric],
            width: 8,
        })));
        this.dashboard.addWidgets(new aws_cloudwatch_1.Row(new aws_cloudwatch_1.GraphWidget({
            title: 'Input and Output Tokens (All Models)',
            left: [inputTokensAllModelsMetric],
            right: [outputTokensAllModelsMetric],
            period: period,
            width: 12,
        }), new aws_cloudwatch_1.SingleValueWidget({
            title: 'Invocations (All Models)',
            metrics: [invocationsCountAllModelsMetric],
            width: 4,
        }), new aws_cloudwatch_1.SingleValueWidget({
            title: 'Output Image Count (All Models)',
            metrics: [outputImageMetric],
            width: 4,
        }), new aws_cloudwatch_1.SingleValueWidget({
            title: 'Client Errors (All Models)',
            metrics: [invocationsClientErrorsAllModelsMetric],
            width: 4,
        }), new aws_cloudwatch_1.SingleValueWidget({
            title: 'Server Errors (All Models)',
            metrics: [invocationsServerErrorsAllModelsMetric],
            width: 4,
        }), new aws_cloudwatch_1.SingleValueWidget({
            title: 'Throttling Errors (All Models)',
            metrics: [invocationsThrottlesErrorsMetric],
            width: 4,
        }), new aws_cloudwatch_1.SingleValueWidget({
            title: 'Legacy invocations (All Models)',
            metrics: [invocationsLegacyModelMetric],
            width: 4,
        })));
    }
    /**
     * Add guardrail monitoring to the dashboard
     * @param {IGuardrail} guardrail - The guardrail to monitor
     */
    addGuardrailMonitoring(guardrail) {
        this.dashboard.addWidgets(new aws_cloudwatch_1.Row(new aws_cloudwatch_1.TextWidget({
            markdown: `# Guardrail Metrics: ${guardrail.guardrailId}`,
            width: 24,
        }), new aws_cloudwatch_1.GraphWidget({
            title: 'Guardrail Activity Over Time',
            left: [guardrail.metricInvocations({ statistic: aws_cloudwatch_1.Stats.SUM })],
            leftYAxis: {
                label: 'Invocations',
                showUnits: false,
            },
            right: [guardrail.metricInvocationsIntervened({ statistic: aws_cloudwatch_1.Stats.SUM })],
            rightYAxis: {
                label: 'Interventions',
                showUnits: false,
            },
            width: 24,
            height: 6,
        })));
    }
    /**
     * Add guardrail monitoring to the dashboard
     */
    addAllGuardrailsMonitoring() {
        this.dashboard.addWidgets(new aws_cloudwatch_1.Row(new aws_cloudwatch_1.TextWidget({
            markdown: '# Guardrail Metrics Across All Guardrails',
            width: 24,
        }), new aws_cloudwatch_1.GraphWidget({
            title: 'Guardrail Activity Over Time',
            left: [bedrock_1.Guardrail.metricAllInvocations({ statistic: aws_cloudwatch_1.Stats.SUM })],
            leftYAxis: {
                label: 'Invocations',
                showUnits: false,
            },
            right: [bedrock_1.Guardrail.metricAllInvocationsIntervened({ statistic: aws_cloudwatch_1.Stats.SUM })],
            rightYAxis: {
                label: 'Interventions',
                showUnits: false,
            },
            width: 24,
            height: 6,
        })));
    }
}
exports.BedrockCwDashboard = BedrockCwDashboard;
_a = JSII_RTTI_SYMBOL_1;
BedrockCwDashboard[_a] = { fqn: "@cdklabs/generative-ai-cdk-constructs.BedrockCwDashboard", version: "0.1.309" };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvcGF0dGVybnMvZ2VuLWFpL2F3cy1iZWRyb2NrLWN3LWRhc2hib2FyZC9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7Ozs7OztHQVdHO0FBRUgsNkNBQXVEO0FBQ3ZELCtEQVNvQztBQUNwQywyQ0FBdUM7QUFDdkMsc0RBQWlFO0FBbUVqRTs7R0FFRztBQUNILE1BQWEsa0JBQW1CLFNBQVEsc0JBQVM7SUFNL0M7Ozs7Ozs7T0FPRztJQUNILFlBQVksS0FBZ0IsRUFBRSxFQUFVLEVBQUUsUUFBaUMsRUFBRTtRQUMzRSxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRWpCLElBQUksQ0FBQyxTQUFTO1lBQ1osS0FBSyxDQUFDLGlCQUFpQjtnQkFDdkIsSUFBSSwwQkFBUyxDQUFDLElBQUksRUFBRSwwQkFBMEIsRUFBRSxFQUFFLEVBQUU7b0JBQ2xELGFBQWEsRUFBRSxLQUFLLENBQUMsYUFBYSxJQUFJLHlCQUF5QjtpQkFDaEUsQ0FBQyxDQUFDO1FBRUwsTUFBTSxzQkFBc0IsR0FDMUIsVUFBVTtZQUNWLGlCQUFHLENBQUMsTUFBTTtZQUNWLGlEQUFpRDtZQUNqRCxpQkFBRyxDQUFDLE1BQU07WUFDVixtQkFBbUI7WUFDbkIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUM7UUFFL0IsSUFBSSx1QkFBUyxDQUFDLElBQUksRUFBRSxnQ0FBZ0MsRUFBRSxFQUFFLEVBQUU7WUFDeEQsS0FBSyxFQUFFLHNCQUFzQjtTQUM5QixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLGtCQUFrQixDQUFDLFNBQWlCLEVBQUUsT0FBZSxFQUFFLFFBQThCLEVBQUU7UUFDNUYsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sSUFBSSxzQkFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztR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Ii8qKlxuICogIENvcHlyaWdodCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpLiBZb3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiAgd2l0aCB0aGUgTGljZW5zZS4gQSBjb3B5IG9mIHRoZSBMaWNlbnNlIGlzIGxvY2F0ZWQgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqICBvciBpbiB0aGUgJ2xpY2Vuc2UnIGZpbGUgYWNjb21wYW55aW5nIHRoaXMgZmlsZS4gVGhpcyBmaWxlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFU1xuICogIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXG4gKiAgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IER1cmF0aW9uLCBBd3MsIENmbk91dHB1dCB9IGZyb20gJ2F3cy1jZGstbGliJztcbmltcG9ydCB7XG4gIE1ldHJpYyxcbiAgRGFzaGJvYXJkLFxuICBHcmFwaFdpZGdldCxcbiAgU2luZ2xlVmFsdWVXaWRnZXQsXG4gIFJvdyxcbiAgU3RhdHMsXG4gIFRleHRXaWRnZXQsXG4gIE1hdGhFeHByZXNzaW9uLFxufSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtY2xvdWR3YXRjaCc7XG5pbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tICdjb25zdHJ1Y3RzJztcbmltcG9ydCB7IEd1YXJkcmFpbCwgSUd1YXJkcmFpbCB9IGZyb20gJy4uLy4uLy4uL2Nkay1saWIvYmVkcm9jayc7XG5cbi8qKlxuICogVGhlIHByb3BlcnRpZXMgZm9yIHRoZSBNb2RlbE1vbml0b3JpbmdQcm9wcyBjbGFzcy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNb2RlbE1vbml0b3JpbmdQcm9wcyB7XG4gIC8qXG4gICAqIE9wdGlvbmFsIC0gVGhlIHBlcmlvZCBvdmVyIHdoaWNoIHRoZSBzcGVjaWZpZWQgc3RhdGlzdGljIGlzIGFwcGxpZWQuXG4gICAqIEBkZWZhdWx0IC0gMSBob3VyXG4gICAqL1xuICByZWFkb25seSBwZXJpb2Q/OiBEdXJhdGlvbjtcbiAgLypcbiAgICogT3B0aW9uYWwgLSBPbmx5IGFwcGxpY2FibGUgZm9yIGltYWdlIGdlbmVyYXRpb24gbW9kZWxzLlxuICAgKiBVc2VkIGZvciB0aGUgT3V0cHV0SW1hZ2VDb3VudCBtZXRyaWMgYXMgZm9sbG93czpcbiAgICogXCJNb2RlbElkICsgSW1hZ2VTaXplICsgQnVja2V0ZWRTdGVwU2l6ZVwiXG4gICAqIEBkZWZhdWx0IC0gZW1wdHlcbiAgICovXG4gIHJlYWRvbmx5IGltYWdlU2l6ZT86IHN0cmluZztcbiAgLypcbiAgICogT3B0aW9uYWwgLSBPbmx5IGFwcGxpY2FibGUgZm9yIGltYWdlIGdlbmVyYXRpb24gbW9kZWxzLlxuICAgKiBVc2VkIGZvciB0aGUgT3V0cHV0SW1hZ2VDb3VudCBtZXRyaWMgYXMgZm9sbG93czpcbiAgICogXCJNb2RlbElkICsgSW1hZ2VTaXplICsgQnVja2V0ZWRTdGVwU2l6ZVwiXG4gICAqIEBkZWZhdWx0IC0gZW1wdHlcbiAgICovXG4gIHJlYWRvbmx5IGJ1Y2tldGVkU3RlcFNpemU/OiBzdHJpbmc7XG4gIC8qXG4gICAqIE9wdGlvbmFsIC0gQ29zdCBwZXIgMUsgaW5wdXQgdG9rZW5zXG4gICAqIFVzZWQgT25seSBmb3Igc2luZ2xlIG1vZGVsIG1vbml0b3JpbmdcbiAgICogVXNlZCB0byBjb21wdXRlIG9uLWRlbWFuZCBpbnB1dCBhbmQgdG90YWwgdG9rZW5zIGNvc3RcbiAgICogZm9yIGEgc3BlY2lmaWMgbW9kZWwuIFBsZWFzZSByZWZlciB0byBodHRwczovL2F3cy5hbWF6b24uY29tL2JlZHJvY2svcHJpY2luZy9cbiAgICogZm9yIHByaWNpbmcgZGV0YWlscy5cbiAgICogQGRlZmF1bHQgLSBlbXB0eVxuICAgKi9cbiAgcmVhZG9ubHkgaW5wdXRUb2tlblByaWNlPzogbnVtYmVyO1xuICAvKlxuICAgKiBPcHRpb25hbCAtIENvc3QgcGVyIDFLIG91dHB1dCB0b2tlbnNcbiAgICogVXNlZCBPbmx5IGZvciBzaW5nbGUgbW9kZWwgbW9uaXRvcmluZ1xuICAgKiBVc2VkIHRvIGNvbXB1dGUgb24tZGVtYW5kIGlucHV0IGFuZCB0b3RhbCB0b2tlbnMgY29zdFxuICAgKiBmb3IgYSBzcGVjaWZpYyBtb2RlbC4gUGxlYXNlIHJlZmVyIHRvIGh0dHBzOi8vYXdzLmFtYXpvbi5jb20vYmVkcm9jay9wcmljaW5nL1xuICAgKiBmb3IgcHJpY2luZyBkZXRhaWxzLlxuICAgKiBAZGVmYXVsdCAtIGVtcHR5XG4gICAqL1xuICByZWFkb25seSBvdXRwdXRUb2tlblByaWNlPzogbnVtYmVyO1xufVxuXG4vKipcbiAqIFRoZSBwcm9wZXJ0aWVzIGZvciB0aGUgQmVkcm9ja0N3RGFzaGJvYXJkUHJvcHMgY2xhc3MuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmVkcm9ja0N3RGFzaGJvYXJkUHJvcHMge1xuICAvKipcbiAgICogT3B0aW9uYWwgQW4gZXhpc3RpbmcgZGFzaGJvYXJkIHdoZXJlIG1ldHJpY3Mgd2lsbCBiZSBhZGRlZCB0by5cbiAgICogSWYgbm90IHByb3ZpZGVkLCB0aGUgY29uc3RydWN0IHdpbGwgY3JlYXRlIGEgbmV3IGRhc2hib2FyZFxuICAgKlxuICAgKiBAZGVmYXVsdCAtIG5vbmVcbiAgICovXG4gIHJlYWRvbmx5IGV4aXN0aW5nRGFzaGJvYXJkPzogRGFzaGJvYXJkO1xuXG4gIC8qKlxuICAgKiBPcHRpb25hbCBBIG5hbWUgZm9yIHRoZSBkYXNoYm9hcmQgd2hpY2ggd2lsbCBiZSBjcmVhdGVkLlxuICAgKiBJZiBleGlzdGluZ0Rhc2hib2FyZCBpcyBkZWZpbmVkLCB0aGlzIHZhbHVlIHdpbGwgYmUgaWdub3JlZC5cbiAgICogSWYgbm90IHByb3ZpZGVkLCB0aGUgY29uc3RydWN0IHdpbGwgY3JlYXRlIGEgbmV3IGRhc2hib2FyZCBuYW1lZCAnQmVkcm9ja01ldHJpY3NEYXNoYm9hcmQnXG4gICAqXG4gICAqIEBkZWZhdWx0IC0gbm9uZVxuICAgKi9cbiAgcmVhZG9ubHkgZGFzaGJvYXJkTmFtZT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBUaGUgQmVkcm9ja0N3RGFzaGJvYXJkIGNsYXNzLlxuICovXG5leHBvcnQgY2xhc3MgQmVkcm9ja0N3RGFzaGJvYXJkIGV4dGVuZHMgQ29uc3RydWN0IHtcbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGluc3RhbmNlIG9mIENsb3VkV2F0Y2ggZGFzaGJvYXJkIHVzZWQgYnkgdGhlIGNvbnN0cnVjdFxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IGRhc2hib2FyZDogRGFzaGJvYXJkO1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBCZWRyb2NrQ3dEYXNoYm9hcmQgY2xhc3MuXG4gICAqIEBwYXJhbSB7Y2RrLkFwcH0gc2NvcGUgLSByZXByZXNlbnRzIHRoZSBzY29wZSBmb3IgYWxsIHRoZSByZXNvdXJjZXMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIHRoaXMgaXMgYSBhIHNjb3BlLXVuaXF1ZSBpZC5cbiAgICogQHBhcmFtIHtCZWRyb2NrQ3dEYXNoYm9hcmRQcm9wc30gcHJvcHMgLSB1c2VyIHByb3ZpZGVkIHByb3BzIGZvciB0aGUgY29uc3RydWN0LlxuICAgKiBAc2luY2UgMC4wLjBcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY29uc3RydWN0b3Ioc2NvcGU6IENvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IEJlZHJvY2tDd0Rhc2hib2FyZFByb3BzID0ge30pIHtcbiAgICBzdXBlcihzY29wZSwgaWQpO1xuXG4gICAgdGhpcy5kYXNoYm9hcmQgPVxuICAgICAgcHJvcHMuZXhpc3RpbmdEYXNoYm9hcmQgPz9cbiAgICAgIG5ldyBEYXNoYm9hcmQodGhpcywgYEJlZHJvY2tNZXRyaWNzRGFzaGJvYXJkJHtpZH1gLCB7XG4gICAgICAgIGRhc2hib2FyZE5hbWU6IHByb3BzLmRhc2hib2FyZE5hbWUgPz8gJ0JlZHJvY2tNZXRyaWNzRGFzaGJvYXJkJyxcbiAgICAgIH0pO1xuXG4gICAgY29uc3QgY2xvdWR3YXRjaERhc2hib2FyZFVSTCA9XG4gICAgICAnaHR0cHM6Ly8nICtcbiAgICAgIEF3cy5SRUdJT04gK1xuICAgICAgJy5jb25zb2xlLmF3cy5hbWF6b24uY29tL2Nsb3Vkd2F0Y2gvaG9tZT9yZWdpb249JyArXG4gICAgICBBd3MuUkVHSU9OICtcbiAgICAgICcjZGFzaGJvYXJkczpuYW1lPScgK1xuICAgICAgdGhpcy5kYXNoYm9hcmQuZGFzaGJvYXJkTmFtZTtcblxuICAgIG5ldyBDZm5PdXRwdXQodGhpcywgYEJlZHJvY2tNZXRyaWNzRGFzaGJvYXJkT3V0cHV0JHtpZH1gLCB7XG4gICAgICB2YWx1ZTogY2xvdWR3YXRjaERhc2hib2FyZFVSTCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qIFByb3ZpZGUgbWV0cmljcyBmb3IgYSBzcGVjaWZpYyBtb2RlbCBpZCBpbiBCZWRyb2NrXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbE5hbWUgLSBNb2RlbCBuYW1lIGFzIGl0IHdpbGwgYXBwZWFyIGluIHRoZSBkYXNoYm9hcmQgcm93IHdpZGdldC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsSWQgLSBCZWRyb2NrIG1vZGVsIGlkIGFzIGRlZmluZWQgaW4gaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL2JlZHJvY2svbGF0ZXN0L3VzZXJndWlkZS9tb2RlbC1pZHMuaHRtbFxuICAgKiBAcGFyYW0ge01vZGVsTW9uaXRvcmluZ1Byb3BzfSBwcm9wcyAtIHVzZXIgcHJvdmlkZWQgcHJvcHMgZm9yIHRoZSBtb25pdG9yaW5nLlxuICAgKi9cbiAgcHVibGljIGFkZE1vZGVsTW9uaXRvcmluZyhtb2RlbE5hbWU6IHN0cmluZywgbW9kZWxJZDogc3RyaW5nLCBwcm9wczogTW9kZWxNb25pdG9yaW5nUHJvcHMgPSB7fSkge1xuICAgIGNvbnN0IHBlcmlvZCA9IHByb3BzLnBlcmlvZCA/PyBEdXJhdGlvbi5ob3VycygxKTtcbiAgICBjb25zdCBvdXRwdXRJbWFnZUNvdW50RGltZW5zaW9uID0gbW9kZWxJZCArIHByb3BzLmltYWdlU2l6ZSArIHByb3BzLmJ1Y2tldGVkU3RlcFNpemU7XG5cbiAgICBjb25zdCBtb2RlbElucHV0VG9rZW5zTWV0cmljID0gbmV3IE1ldHJpYyh7XG4gICAgICBuYW1lc3BhY2U6ICdBV1MvQmVkcm9jaycsXG4gICAgICBtZXRyaWNOYW1lOiAnSW5wdXRUb2tlbkNvdW50JyxcbiAgICAgIGRpbWVuc2lvbnNNYXA6IHtcbiAgICAgICAgTW9kZWxJZDogbW9kZWxJZCxcbiAgICAgIH0sXG4gICAgICBzdGF0aXN0aWM6IFN0YXRzLlNVTSxcbiAgICAgIHBlcmlvZDogcGVyaW9kLFxuICAgIH0pO1xuXG4gICAgY29uc3QgbW9kZWxPdXRwdXRUb2tlbnNNZXRyaWMgPSBuZXcgTWV0cmljKHtcbiAgICAgIG5hbWVzcGFjZTogJ0FXUy9CZWRyb2NrJyxcbiAgICAgIG1ldHJpY05hbWU6ICdPdXRwdXRUb2tlbkNvdW50JyxcbiAgICAgIGRpbWVuc2lvbnNNYXA6IHtcbiAgICAgICAgTW9kZWxJZDogbW9kZWxJZCxcbiAgICAgIH0sXG4gICAgICBzdGF0aXN0aWM6IFN0YXRzLlNVTSxcbiAgICAgIHBlcmlvZDogcGVyaW9kLFxuICAgIH0pO1xuXG4gICAgY29uc3QgbW9kZWxPdXRwdXRJbWFnZU1ldHJpYyA9IG5ldyBNZXRyaWMoe1xuICAgICAgbmFtZXNwYWNlOiAnQVdTL0JlZHJvY2snLFxuICAgICAgbWV0cmljTmFtZTogJ091dHB1dEltYWdlQ291bnQnLFxuICAgICAgZGltZW5zaW9uc01hcDoge1xuICAgICAgICBNb2RlbElkOiBvdXRwdXRJbWFnZUNvdW50RGltZW5zaW9uLFxuICAgICAgfSxcbiAgICAgIHN0YXRpc3RpYzogU3RhdHMuU1VNLFxuICAgICAgcGVyaW9kOiBwZXJpb2QsXG4gICAgfSk7XG5cbiAgICBjb25zdCBtb2RlbExhdGVuY3lBdmdNZXRyaWMgPSBuZXcgTWV0cmljKHtcbiAgICAgIG5hbWVzcGFjZTogJ0FXUy9CZWRyb2NrJyxcbiAgICAgIG1ldHJpY05hbWU6ICdJbnZvY2F0aW9uTGF0ZW5jeScsXG4gICAgICBkaW1lbnNpb25zTWFwOiB7XG4gICAgICAgIE1vZGVsSWQ6IG1vZGVsSWQsXG4gICAgICB9LFxuICAgICAgc3RhdGlzdGljOiBTdGF0cy5BVkVSQUdFLFxuICAgICAgcGVyaW9kOiBwZXJpb2QsXG4gICAgfSk7XG5cbiAgICBjb25zdCBtb2RlbExhdGVuY3lNaW5NZXRyaWMgPSBuZXcgTWV0cmljKHtcbiAgICAgIG5hbWVzcGFjZTogJ0FXUy9CZWRyb2NrJyxcbiAgICAgIG1ldHJpY05hbWU6ICdJbnZvY2F0aW9uTGF0ZW5jeScsXG4gICAgICBkaW1lbnNpb25zTWFwOiB7XG4gICAgICAgIE1vZGVsSWQ6IG1vZGVsSWQsXG4gICAgICB9LFxuICAgICAgc3RhdGlzdGljOiBTdGF0cy5NSU5JTVVNLFxuICAgICAgcGVyaW9kOiBwZXJpb2QsXG4gICAgfSk7XG5cbiAgICBjb25zdCBtb2RlbExhdGVuY3lNYXhNZXRyaWMgPSBuZXcgTWV0cmljKHtcbiAgICAgIG5hbWVzcGFjZTogJ0FXUy9CZWRyb2NrJyxcbiAgICAgIG1ldHJpY05hbWU6ICdJbnZvY2F0aW9uTGF0ZW5jeScsXG4gICAgICBkaW1lbnNpb25zTWFwOiB7XG4gICAgICAgIE1vZGVsSWQ6IG1vZGVsSWQsXG4gICAgICB9LFxuICAgICAgc3RhdGlzdGljOiBTdGF0cy5NQVhJTVVNLFxuICAgICAgcGVyaW9kOiBwZXJpb2QsXG4gICAgfSk7XG5cbiAgICBjb25zdCBtb2RlbEludm9jYXRpb25zQ291bnRNZXRyaWMgPSBuZXcgTWV0cmljKHtcbiAgICAgIG5hbWVzcGFjZTogJ0FXUy9CZWRyb2NrJyxcbiAgICAgIG1ldHJpY05hbWU6ICdJbnZvY2F0aW9ucycsXG4gICAgICBkaW1lbnNpb25zTWFwOiB7XG4gICAgICAgIE1vZGVsSWQ6IG1vZGVsSWQsXG4gICAgICB9LFxuICAgICAgc3RhdGlzdGljOiBTdGF0cy5TQU1QTEVfQ09VTlQsXG4gICAgICBwZXJpb2Q6IHBlcmlvZCxcbiAgICB9KTtcblxuICAgIGNvbnN0IG1vZGVsSW52b2NhdGlvbnNDbGllbnRFcnJvcnNNZXRyaWMgPSBuZXcgTWV0cmljKHtcbiAgICAgIG5hbWVzcGFjZTogJ0FXUy9CZWRyb2NrJyxcbiAgICAgIG1ldHJpY05hbWU6ICdJbnZvY2F0aW9uQ2xpZW50RXJyb3JzJyxcbiAgICAgIGRpbWVuc2lvbnNNYXA6IHtcbiAgICAgICAgTW9kZWxJZDogbW9kZWxJZCxcbiAgICAgIH0sXG4gICAgICBzdGF0aXN0aWM6IFN0YXRzLlNBTVBMRV9DT1VOVCxcbiAgICAgIHBlcmlvZDogcGVyaW9kLFxuICAgIH0pO1xuXG4gICAgY29uc3QgbW9kZWxJbnZvY2F0aW9uc1NlcnZlckVycm9yc01ldHJpYyA9IG5ldyBNZXRyaWMoe1xuICAgICAgbmFtZXNwYWNlOiAnQVdTL0JlZHJvY2snLFxuICAgICAgbWV0cmljTmFtZTogJ0ludm9jYXRpb25TZXJ2ZXJFcnJvcnMnLFxuICAgICAgZGltZW5zaW9uc01hcDoge1xuICAgICAgICBNb2RlbElkOiBtb2RlbElkLFxuICAgICAgfSxcbiAgICAgIHN0YXRpc3RpYzogU3RhdHMuU0FNUExFX0NPVU5ULFxuICAgICAgcGVyaW9kOiBwZXJpb2QsXG4gICAgfSk7XG5cbiAgICBjb25zdCBtb2RlbEludm9jYXRpb25zVGhyb3R0bGVzRXJyb3JzTWV0cmljID0gbmV3IE1ldHJpYyh7XG4gICAgICBuYW1lc3BhY2U6ICdBV1MvQmVkcm9jaycsXG4gICAgICBtZXRyaWNOYW1lOiAnSW52b2NhdGlvblRocm90dGxlcycsXG4gICAgICBkaW1lbnNpb25zTWFwOiB7XG4gICAgICAgIE1vZGVsSWQ6IG1vZGVsSWQsXG4gICAgICB9LFxuICAgICAgc3RhdGlzdGljOiBTdGF0cy5TQU1QTEVfQ09VTlQsXG4gICAgICBwZXJpb2Q6IHBlcmlvZCxcbiAgICB9KTtcblxuICAgIGNvbnN0IG1vZGVsSW52b2NhdGlvbnNMZWdhY3lzTWV0cmljID0gbmV3IE1ldHJpYyh7XG4gICAgICBuYW1lc3BhY2U6ICdBV1MvQmVkcm9jaycsXG4gICAgICBtZXRyaWNOYW1lOiAnTGVnYWN5TW9kZWxJbnZvY2F0aW9ucycsXG4gICAgICBkaW1lbnNpb25zTWFwOiB7XG4gICAgICAgIE1vZGVsSWQ6IG1vZGVsSWQsXG4gICAgICB9LFxuICAgICAgc3RhdGlzdGljOiBTdGF0cy5TQU1QTEVfQ09VTlQsXG4gICAgICBwZXJpb2Q6IHBlcmlvZCxcbiAgICB9KTtcblxuICAgIHRoaXMuZGFzaGJvYXJkLmFkZFdpZGdldHMoXG4gICAgICBuZXcgUm93KFxuICAgICAgICBuZXcgVGV4dFdpZGdldCh7XG4gICAgICAgICAgbWFya2Rvd246IGAjICR7bW9kZWxOYW1lfWAsXG4gICAgICAgICAgd2lkdGg6IDI0LFxuICAgICAgICB9KSxcbiAgICAgICksXG4gICAgKTtcblxuICAgIHRoaXMuZGFzaGJvYXJkLmFkZFdpZGdldHMoXG4gICAgICBuZXcgUm93KFxuICAgICAgICBuZXcgU2luZ2xlVmFsdWVXaWRnZXQoe1xuICAgICAgICAgIHRpdGxlOiAnQXZlcmFnZSBMYXRlbmN5JyxcbiAgICAgICAgICBtZXRyaWNzOiBbbW9kZWxMYXRlbmN5QXZnTWV0cmljXSxcbiAgICAgICAgICB3aWR0aDogOCxcbiAgICAgICAgfSksXG4gICAgICAgIG5ldyBTaW5nbGVWYWx1ZVdpZGdldCh7XG4gICAgICAgICAgdGl0bGU6ICdNaW4gTGF0ZW5jeScsXG4gICAgICAgICAgbWV0cmljczogW21vZGVsTGF0ZW5jeU1pbk1ldHJpY10sXG4gICAgICAgICAgd2lkdGg6IDgsXG4gICAgICAgIH0pLFxuICAgICAgICBuZXcgU2luZ2xlVmFsdWVXaWRnZXQoe1xuICAgICAgICAgIHRpdGxlOiAnTWF4IExhdGVuY3knLFxuICAgICAgICAgIG1ldHJpY3M6IFttb2RlbExhdGVuY3lNYXhNZXRyaWNdLFxuICAgICAgICAgIHdpZHRoOiA4LFxuICAgICAgICB9KSxcbiAgICAgICksXG4gICAgKTtcblxuICAgIGxldCBwcmljaW5nV2lkZ2V0O1xuXG4gICAgaWYgKHByb3BzLmlucHV0VG9rZW5QcmljZSAmJiBwcm9wcy5vdXRwdXRUb2tlblByaWNlKSB7XG4gICAgICBwcmljaW5nV2lkZ2V0ID0gbmV3IEdyYXBoV2lkZ2V0KHtcbiAgICAgICAgdGl0bGU6ICdUb2tlbiBDb3N0IChVU0QpJyxcbiAgICAgICAgbGVmdDogW1xuICAgICAgICAgIG5ldyBNYXRoRXhwcmVzc2lvbih7XG4gICAgICAgICAgICBleHByZXNzaW9uOiBgaW5wdXRUb2tlbnMgLyAxMDAwICogJHtwcm9wcy5pbnB1dFRva2VuUHJpY2V9YCxcbiAgICAgICAgICAgIHVzaW5nTWV0cmljczoge1xuICAgICAgICAgICAgICBpbnB1dFRva2VuczogbW9kZWxJbnB1dFRva2Vuc01ldHJpYyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYWJlbDogJ0lucHV0IFRva2VuIENvc3QnLFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIG5ldyBNYXRoRXhwcmVzc2lvbih7XG4gICAgICAgICAgICBleHByZXNzaW9uOiBgb3V0cHV0VG9rZW5zIC8gMTAwMCAqICR7cHJvcHMub3V0cHV0VG9rZW5QcmljZX1gLFxuICAgICAgICAgICAgdXNpbmdNZXRyaWNzOiB7XG4gICAgICAgICAgICAgIG91dHB1dFRva2VuczogbW9kZWxPdXRwdXRUb2tlbnNNZXRyaWMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGFiZWw6ICdPdXRwdXQgVG9rZW4gQ29zdCcsXG4gICAgICAgICAgfSksXG4gICAgICAgIF0sXG4gICAgICAgIGxlZnRZQXhpczoge1xuICAgICAgICAgIGxhYmVsOiAnSW5wdXQgYW5kIE91dHB1dCcsXG4gICAgICAgICAgc2hvd1VuaXRzOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgcmlnaHQ6IFtcbiAgICAgICAgICBuZXcgTWF0aEV4cHJlc3Npb24oe1xuICAgICAgICAgICAgZXhwcmVzc2lvbjogYGlucHV0VG9rZW5zIC8gMTAwMCAqICR7cHJvcHMuaW5wdXRUb2tlblByaWNlfSArIG91dHB1dFRva2VucyAvIDEwMDAgKiAke3Byb3BzLm91dHB1dFRva2VuUHJpY2V9YCxcbiAgICAgICAgICAgIHVzaW5nTWV0cmljczoge1xuICAgICAgICAgICAgICBpbnB1dFRva2VuczogbW9kZWxJbnB1dFRva2Vuc01ldHJpYyxcbiAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zOiBtb2RlbE91dHB1dFRva2Vuc01ldHJpYyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYWJlbDogJ1RvdGFsIENvc3QnLFxuICAgICAgICAgIH0pLFxuICAgICAgICBdLFxuICAgICAgICByaWdodFlBeGlzOiB7XG4gICAgICAgICAgbGFiZWw6ICdUb3RhbCcsXG4gICAgICAgICAgc2hvd1VuaXRzOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgd2lkdGg6IDEyLFxuICAgICAgICBoZWlnaHQ6IDEwLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5kYXNoYm9hcmQuYWRkV2lkZ2V0cyhcbiAgICAgIG5ldyBSb3coXG4gICAgICAgIG5ldyBHcmFwaFdpZGdldCh7XG4gICAgICAgICAgdGl0bGU6ICdJbnB1dCBhbmQgT3V0cHV0IFRva2VuIENvdW50cycsXG4gICAgICAgICAgbGVmdDogW21vZGVsSW5wdXRUb2tlbnNNZXRyaWNdLFxuICAgICAgICAgIHJpZ2h0OiBbbW9kZWxPdXRwdXRUb2tlbnNNZXRyaWNdLFxuICAgICAgICAgIHBlcmlvZDogcGVyaW9kLFxuICAgICAgICAgIHdpZHRoOiAxMixcbiAgICAgICAgICBoZWlnaHQ6IDEwLFxuICAgICAgICB9KSxcbiAgICAgICAgLi4uKHByaWNpbmdXaWRnZXQgPyBbcHJpY2luZ1dpZGdldF0gOiBbXSksXG4gICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLmRhc2hib2FyZC5hZGRXaWRnZXRzKFxuICAgICAgbmV3IFNpbmdsZVZhbHVlV2lkZ2V0KHtcbiAgICAgICAgdGl0bGU6ICdJbnZvY2F0aW9ucycsXG4gICAgICAgIG1ldHJpY3M6IFttb2RlbEludm9jYXRpb25zQ291bnRNZXRyaWNdLFxuICAgICAgICB3aWR0aDogNCxcbiAgICAgIH0pLFxuICAgICAgbmV3IFNpbmdsZVZhbHVlV2lkZ2V0KHtcbiAgICAgICAgdGl0bGU6ICdDbGllbnQgRXJyb3JzJyxcbiAgICAgICAgbWV0cmljczogW21vZGVsSW52b2NhdGlvbnNDbGllbnRFcnJvcnNNZXRyaWNdLFxuICAgICAgICB3aWR0aDogNCxcbiAgICAgIH0pLFxuICAgICAgbmV3IFNpbmdsZVZhbHVlV2lkZ2V0KHtcbiAgICAgICAgdGl0bGU6ICdTZXJ2ZXIgRXJyb3JzJyxcbiAgICAgICAgbWV0cmljczogW21vZGVsSW52b2NhdGlvbnNTZXJ2ZXJFcnJvcnNNZXRyaWNdLFxuICAgICAgICB3aWR0aDogNCxcbiAgICAgIH0pLFxuICAgICAgbmV3IFNpbmdsZVZhbHVlV2lkZ2V0KHtcbiAgICAgICAgdGl0bGU6ICdUaHJvdHRsZWQgaW52b2NhdGlvbnMnLFxuICAgICAgICBtZXRyaWNzOiBbbW9kZWxJbnZvY2F0aW9uc1Rocm90dGxlc0Vycm9yc01ldHJpY10sXG4gICAgICAgIHdpZHRoOiA0LFxuICAgICAgfSksXG4gICAgICBuZXcgU2luZ2xlVmFsdWVXaWRnZXQoe1xuICAgICAgICB0aXRsZTogJ0xlZ2FjeSBpbnZvY2F0aW9ucycsXG4gICAgICAgIG1ldHJpY3M6IFttb2RlbEludm9jYXRpb25zTGVnYWN5c01ldHJpY10sXG4gICAgICAgIHdpZHRoOiA0LFxuICAgICAgfSksXG4gICAgICBuZXcgU2luZ2xlVmFsdWVXaWRnZXQoe1xuICAgICAgICB0aXRsZTogJ091dHB1dEltYWdlQ291bnQnLFxuICAgICAgICBtZXRyaWNzOiBbbW9kZWxPdXRwdXRJbWFnZU1ldHJpY10sXG4gICAgICAgIHdpZHRoOiA0LFxuICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIC8qIEFkZCBhIG5ldyByb3cgdG8gdGhlIGRhc2hib2FyZCBwcm92aWRpbmcgbWV0cmljcyBhY3Jvc3MgYWxsIG1vZGVsIGlkcyBpbiBCZWRyb2NrXG4gICAqIEBwYXJhbSB7TW9kZWxNb25pdG9yaW5nUHJvcHN9IHByb3BzIC0gdXNlciBwcm92aWRlZCBwcm9wcyBmb3IgdGhlIG1vbml0b3JpbmcuXG4gICAqL1xuICBwdWJsaWMgYWRkQWxsTW9kZWxzTW9uaXRvcmluZyhwcm9wczogTW9kZWxNb25pdG9yaW5nUHJvcHMgPSB7fSkge1xuICAgIGNvbnN0IHBlcmlvZCA9IHByb3BzLnBlcmlvZCA/PyBEdXJhdGlvbi5ob3VycygxKTtcblxuICAgIC8vIE1ldHJpY3MgYWNyb3NzIGFsbCBNb2RlbCBJZHNcbiAgICBjb25zdCBpbnB1dFRva2Vuc0FsbE1vZGVsc01ldHJpYyA9IG5ldyBNZXRyaWMoe1xuICAgICAgbmFtZXNwYWNlOiAnQVdTL0JlZHJvY2snLFxuICAgICAgbWV0cmljTmFtZTogJ0lucHV0VG9rZW5Db3VudCcsXG4gICAgICBzdGF0aXN0aWM6IFN0YXRzLlNVTSxcbiAgICAgIHBlcmlvZDogcGVyaW9kLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgb3V0cHV0VG9rZW5zQWxsTW9kZWxzTWV0cmljID0gbmV3IE1ldHJpYyh7XG4gICAgICBuYW1lc3BhY2U6ICdBV1MvQmVkcm9jaycsXG4gICAgICBtZXRyaWNOYW1lOiAnT3V0cHV0VG9rZW5Db3VudCcsXG4gICAgICBzdGF0aXN0aWM6IFN0YXRzLlNVTSxcbiAgICAgIHBlcmlvZDogcGVyaW9kLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgb3V0cHV0SW1hZ2VNZXRyaWMgPSBuZXcgTWV0cmljKHtcbiAgICAgIG5hbWVzcGFjZTogJ0FXUy9CZWRyb2NrJyxcbiAgICAgIG1ldHJpY05hbWU6ICdPdXRwdXRJbWFnZUNvdW50JyxcbiAgICAgIHN0YXRpc3RpYzogU3RhdHMuU1VNLFxuICAgICAgcGVyaW9kOiBwZXJpb2QsXG4gICAgfSk7XG5cbiAgICBjb25zdCBsYXRlbmN5QXZnQWxsTW9kZWxzTWV0cmljID0gbmV3IE1ldHJpYyh7XG4gICAgICBuYW1lc3BhY2U6ICdBV1MvQmVkcm9jaycsXG4gICAgICBtZXRyaWNOYW1lOiAnSW52b2NhdGlvbkxhdGVuY3knLFxuICAgICAgc3RhdGlzdGljOiBTdGF0cy5BVkVSQUdFLFxuICAgICAgcGVyaW9kOiBwZXJpb2QsXG4gICAgfSk7XG5cbiAgICBjb25zdCBsYXRlbmN5TWluQWxsTW9kZWxzTWV0cmljID0gbmV3IE1ldHJpYyh7XG4gICAgICBuYW1lc3BhY2U6ICdBV1MvQmVkcm9jaycsXG4gICAgICBtZXRyaWNOYW1lOiAnSW52b2NhdGlvbkxhdGVuY3knLFxuICAgICAgc3RhdGlzdGljOiBTdGF0cy5NSU5JTVVNLFxuICAgICAgcGVyaW9kOiBwZXJpb2QsXG4gICAgfSk7XG5cbiAgICBjb25zdCBsYXRlbmN5TWF4QWxsTW9kZWxzTWV0cmljID0gbmV3IE1ldHJpYyh7XG4gICAgICBuYW1lc3BhY2U6ICdBV1MvQmVkcm9jaycsXG4gICAgICBtZXRyaWNOYW1lOiAnSW52b2NhdGlvbkxhdGVuY3knLFxuICAgICAgc3RhdGlzdGljOiBTdGF0cy5NQVhJTVVNLFxuICAgICAgcGVyaW9kOiBwZXJpb2QsXG4gICAgfSk7XG5cbiAgICBjb25zdCBpbnZvY2F0aW9uc0NvdW50QWxsTW9kZWxzTWV0cmljID0gbmV3IE1ldHJpYyh7XG4gICAgICBuYW1lc3BhY2U6ICdBV1MvQmVkcm9jaycsXG4gICAgICBtZXRyaWNOYW1lOiAnSW52b2NhdGlvbnMnLFxuICAgICAgc3RhdGlzdGljOiBTdGF0cy5TQU1QTEVfQ09VTlQsXG4gICAgICBwZXJpb2Q6IHBlcmlvZCxcbiAgICB9KTtcblxuICAgIGNvbnN0IGludm9jYXRpb25zQ2xpZW50RXJyb3JzQWxsTW9kZWxzTWV0cmljID0gbmV3IE1ldHJpYyh7XG4gICAgICBuYW1lc3BhY2U6ICdBV1MvQmVkcm9jaycsXG4gICAgICBtZXRyaWNOYW1lOiAnSW52b2NhdGlvbkNsaWVudEVycm9ycycsXG4gICAgICBzdGF0aXN0aWM6IFN0YXRzLlNBTVBMRV9DT1VOVCxcbiAgICAgIHBlcmlvZDogcGVyaW9kLFxuICAgIH0pO1xuXG4gICAgY29uc3QgaW52b2NhdGlvbnNTZXJ2ZXJFcnJvcnNBbGxNb2RlbHNNZXRyaWMgPSBuZXcgTWV0cmljKHtcbiAgICAgIG5hbWVzcGFjZTogJ0FXUy9CZWRyb2NrJyxcbiAgICAgIG1ldHJpY05hbWU6ICdJbnZvY2F0aW9uU2VydmVyRXJyb3JzJyxcbiAgICAgIHN0YXRpc3RpYzogU3RhdHMuU0FNUExFX0NPVU5ULFxuICAgICAgcGVyaW9kOiBwZXJpb2QsXG4gICAgfSk7XG5cbiAgICBjb25zdCBpbnZvY2F0aW9uc1Rocm90dGxlc0Vycm9yc01ldHJpYyA9IG5ldyBNZXRyaWMoe1xuICAgICAgbmFtZXNwYWNlOiAnQVdTL0JlZHJvY2snLFxuICAgICAgbWV0cmljTmFtZTogJ0ludm9jYXRpb25UaHJvdHRsZXMnLFxuICAgICAgc3RhdGlzdGljOiBTdGF0cy5TQU1QTEVfQ09VTlQsXG4gICAgICBwZXJpb2Q6IHBlcmlvZCxcbiAgICB9KTtcblxuICAgIGNvbnN0IGludm9jYXRpb25zTGVnYWN5TW9kZWxNZXRyaWMgPSBuZXcgTWV0cmljKHtcbiAgICAgIG5hbWVzcGFjZTogJ0FXUy9CZWRyb2NrJyxcbiAgICAgIG1ldHJpY05hbWU6ICdMZWdhY3lNb2RlbEludm9jYXRpb25zJyxcbiAgICAgIHN0YXRpc3RpYzogU3RhdHMuU0FNUExFX0NPVU5ULFxuICAgICAgcGVyaW9kOiBwZXJpb2QsXG4gICAgfSk7XG5cbiAgICB0aGlzLmRhc2hib2FyZC5hZGRXaWRnZXRzKFxuICAgICAgbmV3IFJvdyhcbiAgICAgICAgbmV3IFRleHRXaWRnZXQoe1xuICAgICAgICAgIG1hcmtkb3duOiAnIyBNZXRyaWNzIEFjcm9zcyBBbGwgTW9kZWxzJyxcbiAgICAgICAgICB3aWR0aDogMjQsXG4gICAgICAgIH0pLFxuICAgICAgKSxcbiAgICApO1xuICAgIHRoaXMuZGFzaGJvYXJkLmFkZFdpZGdldHMoXG4gICAgICBuZXcgUm93KFxuICAgICAgICBuZXcgU2luZ2xlVmFsdWVXaWRnZXQoe1xuICAgICAgICAgIHRpdGxlOiAnQXZlcmFnZSBMYXRlbmN5IChBbGwgTW9kZWxzKScsXG4gICAgICAgICAgbWV0cmljczogW2xhdGVuY3lBdmdBbGxNb2RlbHNNZXRyaWNdLFxuICAgICAgICAgIHdpZHRoOiA4LFxuICAgICAgICB9KSxcbiAgICAgICAgbmV3IFNpbmdsZVZhbHVlV2lkZ2V0KHtcbiAgICAgICAgICB0aXRsZTogJ01pbiBMYXRlbmN5IChBbGwgTW9kZWxzKScsXG4gICAgICAgICAgbWV0cmljczogW2xhdGVuY3lNaW5BbGxNb2RlbHNNZXRyaWNdLFxuICAgICAgICAgIHdpZHRoOiA4LFxuICAgICAgICB9KSxcbiAgICAgICAgbmV3IFNpbmdsZVZhbHVlV2lkZ2V0KHtcbiAgICAgICAgICB0aXRsZTogJ01heCBMYXRlbmN5IChBbGwgTW9kZWxzKScsXG4gICAgICAgICAgbWV0cmljczogW2xhdGVuY3lNYXhBbGxNb2RlbHNNZXRyaWNdLFxuICAgICAgICAgIHdpZHRoOiA4LFxuICAgICAgICB9KSxcbiAgICAgICksXG4gICAgKTtcbiAgICB0aGlzLmRhc2hib2FyZC5hZGRXaWRnZXRzKFxuICAgICAgbmV3IFJvdyhcbiAgICAgICAgbmV3IEdyYXBoV2lkZ2V0KHtcbiAgICAgICAgICB0aXRsZTogJ0lucHV0IGFuZCBPdXRwdXQgVG9rZW5zIChBbGwgTW9kZWxzKScsXG4gICAgICAgICAgbGVmdDogW2lucHV0VG9rZW5zQWxsTW9kZWxzTWV0cmljXSxcbiAgICAgICAgICByaWdodDogW291dHB1dFRva2Vuc0FsbE1vZGVsc01ldHJpY10sXG4gICAgICAgICAgcGVyaW9kOiBwZXJpb2QsXG4gICAgICAgICAgd2lkdGg6IDEyLFxuICAgICAgICB9KSxcbiAgICAgICAgbmV3IFNpbmdsZVZhbHVlV2lkZ2V0KHtcbiAgICAgICAgICB0aXRsZTogJ0ludm9jYXRpb25zIChBbGwgTW9kZWxzKScsXG4gICAgICAgICAgbWV0cmljczogW2ludm9jYXRpb25zQ291bnRBbGxNb2RlbHNNZXRyaWNdLFxuICAgICAgICAgIHdpZHRoOiA0LFxuICAgICAgICB9KSxcbiAgICAgICAgbmV3IFNpbmdsZVZhbHVlV2lkZ2V0KHtcbiAgICAgICAgICB0aXRsZTogJ091dHB1dCBJbWFnZSBDb3VudCAoQWxsIE1vZGVscyknLFxuICAgICAgICAgIG1ldHJpY3M6IFtvdXRwdXRJbWFnZU1ldHJpY10sXG4gICAgICAgICAgd2lkdGg6IDQsXG4gICAgICAgIH0pLFxuICAgICAgICBuZXcgU2luZ2xlVmFsdWVXaWRnZXQoe1xuICAgICAgICAgIHRpdGxlOiAnQ2xpZW50IEVycm9ycyAoQWxsIE1vZGVscyknLFxuICAgICAgICAgIG1ldHJpY3M6IFtpbnZvY2F0aW9uc0NsaWVudEVycm9yc0FsbE1vZGVsc01ldHJpY10sXG4gICAgICAgICAgd2lkdGg6IDQsXG4gICAgICAgIH0pLFxuICAgICAgICBuZXcgU2luZ2xlVmFsdWVXaWRnZXQoe1xuICAgICAgICAgIHRpdGxlOiAnU2VydmVyIEVycm9ycyAoQWxsIE1vZGVscyknLFxuICAgICAgICAgIG1ldHJpY3M6IFtpbnZvY2F0aW9uc1NlcnZlckVycm9yc0FsbE1vZGVsc01ldHJpY10sXG4gICAgICAgICAgd2lkdGg6IDQsXG4gICAgICAgIH0pLFxuICAgICAgICBuZXcgU2luZ2xlVmFsdWVXaWRnZXQoe1xuICAgICAgICAgIHRpdGxlOiAnVGhyb3R0bGluZyBFcnJvcnMgKEFsbCBNb2RlbHMpJyxcbiAgICAgICAgICBtZXRyaWNzOiBbaW52b2NhdGlvbnNUaHJvdHRsZXNFcnJvcnNNZXRyaWNdLFxuICAgICAgICAgIHdpZHRoOiA0LFxuICAgICAgICB9KSxcbiAgICAgICAgbmV3IFNpbmdsZVZhbHVlV2lkZ2V0KHtcbiAgICAgICAgICB0aXRsZTogJ0xlZ2FjeSBpbnZvY2F0aW9ucyAoQWxsIE1vZGVscyknLFxuICAgICAgICAgIG1ldHJpY3M6IFtpbnZvY2F0aW9uc0xlZ2FjeU1vZGVsTWV0cmljXSxcbiAgICAgICAgICB3aWR0aDogNCxcbiAgICAgICAgfSksXG4gICAgICApLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGd1YXJkcmFpbCBtb25pdG9yaW5nIHRvIHRoZSBkYXNoYm9hcmRcbiAgICogQHBhcmFtIHtJR3VhcmRyYWlsfSBndWFyZHJhaWwgLSBUaGUgZ3VhcmRyYWlsIHRvIG1vbml0b3JcbiAgICovXG4gIHB1YmxpYyBhZGRHdWFyZHJhaWxNb25pdG9yaW5nKGd1YXJkcmFpbDogSUd1YXJkcmFpbCkge1xuICAgIHRoaXMuZGFzaGJvYXJkLmFkZFdpZGdldHMoXG4gICAgICBuZXcgUm93KFxuICAgICAgICBuZXcgVGV4dFdpZGdldCh7XG4gICAgICAgICAgbWFya2Rvd246IGAjIEd1YXJkcmFpbCBNZXRyaWNzOiAke2d1YXJkcmFpbC5ndWFyZHJhaWxJZH1gLFxuICAgICAgICAgIHdpZHRoOiAyNCxcbiAgICAgICAgfSksXG4gICAgICAgIG5ldyBHcmFwaFdpZGdldCh7XG4gICAgICAgICAgdGl0bGU6ICdHdWFyZHJhaWwgQWN0aXZpdHkgT3ZlciBUaW1lJyxcbiAgICAgICAgICBsZWZ0OiBbZ3VhcmRyYWlsLm1ldHJpY0ludm9jYXRpb25zKHsgc3RhdGlzdGljOiBTdGF0cy5TVU0gfSldLFxuICAgICAgICAgIGxlZnRZQXhpczoge1xuICAgICAgICAgICAgbGFiZWw6ICdJbnZvY2F0aW9ucycsXG4gICAgICAgICAgICBzaG93VW5pdHM6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmlnaHQ6IFtndWFyZHJhaWwubWV0cmljSW52b2NhdGlvbnNJbnRlcnZlbmVkKHsgc3RhdGlzdGljOiBTdGF0cy5TVU0gfSldLFxuICAgICAgICAgIHJpZ2h0WUF4aXM6IHtcbiAgICAgICAgICAgIGxhYmVsOiAnSW50ZXJ2ZW50aW9ucycsXG4gICAgICAgICAgICBzaG93VW5pdHM6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgd2lkdGg6IDI0LFxuICAgICAgICAgIGhlaWdodDogNixcbiAgICAgICAgfSksXG4gICAgICApLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGd1YXJkcmFpbCBtb25pdG9yaW5nIHRvIHRoZSBkYXNoYm9hcmRcbiAgICovXG4gIHB1YmxpYyBhZGRBbGxHdWFyZHJhaWxzTW9uaXRvcmluZygpIHtcbiAgICB0aGlzLmRhc2hib2FyZC5hZGRXaWRnZXRzKFxuICAgICAgbmV3IFJvdyhcbiAgICAgICAgbmV3IFRleHRXaWRnZXQoe1xuICAgICAgICAgIG1hcmtkb3duOiAnIyBHdWFyZHJhaWwgTWV0cmljcyBBY3Jvc3MgQWxsIEd1YXJkcmFpbHMnLFxuICAgICAgICAgIHdpZHRoOiAyNCxcbiAgICAgICAgfSksXG4gICAgICAgIG5ldyBHcmFwaFdpZGdldCh7XG4gICAgICAgICAgdGl0bGU6ICdHdWFyZHJhaWwgQWN0aXZpdHkgT3ZlciBUaW1lJyxcbiAgICAgICAgICBsZWZ0OiBbR3VhcmRyYWlsLm1ldHJpY0FsbEludm9jYXRpb25zKHsgc3RhdGlzdGljOiBTdGF0cy5TVU0gfSldLFxuICAgICAgICAgIGxlZnRZQXhpczoge1xuICAgICAgICAgICAgbGFiZWw6ICdJbnZvY2F0aW9ucycsXG4gICAgICAgICAgICBzaG93VW5pdHM6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmlnaHQ6IFtHdWFyZHJhaWwubWV0cmljQWxsSW52b2NhdGlvbnNJbnRlcnZlbmVkKHsgc3RhdGlzdGljOiBTdGF0cy5TVU0gfSldLFxuICAgICAgICAgIHJpZ2h0WUF4aXM6IHtcbiAgICAgICAgICAgIGxhYmVsOiAnSW50ZXJ2ZW50aW9ucycsXG4gICAgICAgICAgICBzaG93VW5pdHM6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgd2lkdGg6IDI0LFxuICAgICAgICAgIGhlaWdodDogNixcbiAgICAgICAgfSksXG4gICAgICApLFxuICAgICk7XG4gIH1cbn1cbiJdfQ==