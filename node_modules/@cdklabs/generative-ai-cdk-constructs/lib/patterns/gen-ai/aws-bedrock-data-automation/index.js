"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.BedrockDataAutomation = void 0;
const JSII_RTTI_SYMBOL_1 = Symbol.for("jsii.rtti");
/**
 *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License"). You may not use this file except in compliance
 *  with the License. A copy of the License is located at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  or in the 'license' file accompanying this file. This file is distributed on an 'AS IS' BASIS, WITHOUT WARRANTIES
 *  OR CONDITIONS OF ANY KIND, express or implied. See the License for the specific language governing permissions
 *  and limitations under the License.
 */
const path = require("path");
const aws_lambda_python_alpha_1 = require("@aws-cdk/aws-lambda-python-alpha");
const cdk = require("aws-cdk-lib");
const aws_cdk_lib_1 = require("aws-cdk-lib");
const lambda = require("aws-cdk-lib/aws-lambda");
const s3 = require("aws-cdk-lib/aws-s3");
const helpers_internal_1 = require("aws-cdk-lib/core/lib/helpers-internal");
const bda_blueprint_lambda_1 = require("./bda-blueprint-lambda");
const bda_data_processing_lambda_1 = require("./bda-data-processing-lambda");
const bda_project_lambda_1 = require("./bda-project-lambda");
const bda_results_lambda_1 = require("./bda-results-lambda");
const base_class_1 = require("../../../common/base-class");
;
/******************************************************************************
 *                        NEW CONSTRUCT DEFINITION
 *****************************************************************************/
/**
 * Class to create a BDA pattern with CDK.
 */
class BedrockDataAutomation extends base_class_1.BaseClass {
    // ------------------------------------------------------
    // CONSTRUCTOR
    // ------------------------------------------------------
    constructor(scope, id, props) {
        super(scope, id);
        // ------------------------------------------------------
        // Set properties and defaults
        // ------------------------------------------------------
        this.powertoolsLayer = lambda.LayerVersion.fromLayerVersionArn(this, 'PowertoolsLayer', `arn:aws:lambda:${cdk.Stack.of(this).region}:017000801446:layer:AWSLambdaPowertoolsPythonV3-python313-x86_64:8`);
        this.boto3Layer = new aws_lambda_python_alpha_1.PythonLayerVersion(this, 'Boto3Layer', {
            entry: path.join(__dirname, '../../../../layer'),
            compatibleRuntimes: [lambda.Runtime.PYTHON_3_13],
            description: 'Latest boto3 layer for Bedrock Data Automation',
            removalPolicy: cdk.RemovalPolicy.DESTROY,
        });
        // Compute hash used for bucket name
        const hash = (0, helpers_internal_1.md5hash)(id + aws_cdk_lib_1.Aws.ACCOUNT_ID + aws_cdk_lib_1.Aws.REGION);
        // Manage input bucket if needed
        if (props.isCustomBDABlueprintRequired || props.isBDAInvocationRequired) {
            this.bdaInputBucket = this.handleS3Bucket(props.inputBucket, 'input', hash);
        }
        // Manage output bucket if needed
        if (props.isCustomBDABlueprintRequired || props.isBDAInvocationRequired) {
            this.bdaOutputBucket = this.handleS3Bucket(props.outputBucket, 'output', hash);
        }
        if (props.isCustomBDABlueprintRequired && this.bdaInputBucket) {
            this.bdaBlueprintLambdaFunction = new bda_blueprint_lambda_1.BdaBlueprintLambda(this, 'bdablueprintlambda', {
                inputBucket: this.bdaInputBucket,
                lambdaLayers: [this.powertoolsLayer, this.boto3Layer],
            });
        }
        if (props.isBDAProjectRequired && this.bdaInputBucket) {
            this.bdaProjectFunction = new bda_project_lambda_1.BdaProjectLambda(this, 'bdaprojectlambda', {
                inputBucket: this.bdaInputBucket,
                lambdaLayers: [this.powertoolsLayer, this.boto3Layer],
            });
        }
        if (props.isBDAInvocationRequired && this.bdaInputBucket && this.bdaOutputBucket) {
            this.bdaInvocationFunction = new bda_data_processing_lambda_1.BdaDataProcessingLambda(this, 'bdainvocationlambda', {
                inputBucket: this.bdaInputBucket,
                outputBucket: this.bdaOutputBucket,
                lambdaLayers: [this.powertoolsLayer, this.boto3Layer],
            });
        }
        if (props.isStatusRequired && this.bdaOutputBucket) {
            this.bdaResultStatusFunction = new bda_results_lambda_1.BdaResultsambda(this, 'bdaresultslambda', {
                lambdaLayers: [this.powertoolsLayer, this.boto3Layer],
                outputBucket: this.bdaOutputBucket,
            });
        }
    }
    /**
     * Handles the creation or retrieval of an S3 bucket.
     *
     * @param existing_bucket - An optional existing S3 bucket to use.
     * @param type - A string indicating the type of bucket (e.g., 'input' or 'output').
     * @returns The existing bucket if provided, or a newly created S3 bucket.
     */
    handleS3Bucket(existing_bucket, type, hash) {
        if (existing_bucket) {
            return existing_bucket;
        }
        else {
            // bucket for storing server access logging
            const serverAccessLogBucket = new s3.Bucket(this, `${hash}-${type}-serveraccesslogbucket`, {
                blockPublicAccess: s3.BlockPublicAccess.BLOCK_ALL,
                encryption: s3.BucketEncryption.S3_MANAGED,
                enforceSSL: true,
                versioned: true,
                lifecycleRules: [
                    {
                        expiration: cdk.Duration.days(90),
                    },
                ],
            });
            // create the bucket
            return new s3.Bucket(this, `${hash}-${type}-bucket`, {
                encryption: s3.BucketEncryption.S3_MANAGED,
                enforceSSL: true,
                blockPublicAccess: s3.BlockPublicAccess.BLOCK_ALL,
                versioned: true,
                serverAccessLogsBucket: serverAccessLogBucket,
                serverAccessLogsPrefix: `${type}-bucket-logs/`,
                objectOwnership: s3.ObjectOwnership.BUCKET_OWNER_ENFORCED,
                removalPolicy: cdk.RemovalPolicy.DESTROY,
                autoDeleteObjects: true,
                cors: [
                    {
                        allowedMethods: [
                            s3.HttpMethods.GET,
                            s3.HttpMethods.POST,
                            s3.HttpMethods.PUT,
                            s3.HttpMethods.DELETE,
                        ],
                        allowedOrigins: ['*'],
                        allowedHeaders: ['*'],
                        exposedHeaders: ['x-amz-server-side-encryption',
                            'x-amz-request-id',
                            'x-amz-id-2',
                            'ETag',
                            'Content-Type',
                            'Content-Disposition',
                            'Access-Control-Allow-Origin'],
                    },
                ],
            });
        }
    }
}
exports.BedrockDataAutomation = BedrockDataAutomation;
_a = JSII_RTTI_SYMBOL_1;
BedrockDataAutomation[_a] = { fqn: "@cdklabs/generative-ai-cdk-constructs.BedrockDataAutomation", version: "0.1.309" };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvcGF0dGVybnMvZ2VuLWFpL2F3cy1iZWRyb2NrLWRhdGEtYXV0b21hdGlvbi9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7Ozs7OztHQVdHO0FBRUgsNkJBQTZCO0FBQzdCLDhFQUFzRTtBQUN0RSxtQ0FBbUM7QUFDbkMsNkNBQWtDO0FBQ2xDLGlEQUFpRDtBQUNqRCx5Q0FBeUM7QUFDekMsNEVBQWdFO0FBRWhFLGlFQUE0RDtBQUM1RCw2RUFBdUU7QUFDdkUsNkRBQXdEO0FBQ3hELDZEQUF1RDtBQUN2RCwyREFBdUQ7QUFnRHRELENBQUM7QUFFRjs7K0VBRStFO0FBQy9FOztHQUVHO0FBQ0gsTUFBYSxxQkFBc0IsU0FBUSxzQkFBUztJQWdEbEQseURBQXlEO0lBQ3pELGNBQWM7SUFDZCx5REFBeUQ7SUFDekQsWUFBWSxLQUFnQixFQUFFLEVBQVUsRUFBRSxLQUFpQztRQUN6RSxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRWpCLHlEQUF5RDtRQUN6RCw4QkFBOEI7UUFDOUIseURBQXlEO1FBQ3pELElBQUksQ0FBQyxlQUFlLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLEVBQUUsaUJBQWlCLEVBQ3BGLGtCQUFrQixHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLG9FQUFvRSxDQUNoSCxDQUFDO1FBRUYsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLDRDQUFrQixDQUFDLElBQUksRUFBRSxZQUFZLEVBQUU7WUFDM0QsS0FBSyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLG1CQUFtQixDQUFDO1lBQ2hELGtCQUFrQixFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUM7WUFDaEQsV0FBVyxFQUFFLGdE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OzRCQUNaLE1BQU07NEJBQ04sY0FBYzs0QkFDZCxxQkFBcUI7NEJBQ3JCLDZCQUE2QixDQUFDO3FCQUNqQztpQkFDRjthQUNGLENBQUMsQ0FBQztRQUNMLENBQUM7SUFDSCxDQUFDOztBQXJLSCxzREFzS0MiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqICBDb3B5cmlnaHQgQW1hem9uLmNvbSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKS4gWW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogIHdpdGggdGhlIExpY2Vuc2UuIEEgY29weSBvZiB0aGUgTGljZW5zZSBpcyBsb2NhdGVkIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiAgb3IgaW4gdGhlICdsaWNlbnNlJyBmaWxlIGFjY29tcGFueWluZyB0aGlzIGZpbGUuIFRoaXMgZmlsZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVNcbiAqICBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xuICogIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgUHl0aG9uTGF5ZXJWZXJzaW9uIH0gZnJvbSAnQGF3cy1jZGsvYXdzLWxhbWJkYS1weXRob24tYWxwaGEnO1xuaW1wb3J0ICogYXMgY2RrIGZyb20gJ2F3cy1jZGstbGliJztcbmltcG9ydCB7IEF3cyB9IGZyb20gJ2F3cy1jZGstbGliJztcbmltcG9ydCAqIGFzIGxhbWJkYSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtbGFtYmRhJztcbmltcG9ydCAqIGFzIHMzIGZyb20gJ2F3cy1jZGstbGliL2F3cy1zMyc7XG5pbXBvcnQgeyBtZDVoYXNoIH0gZnJvbSAnYXdzLWNkay1saWIvY29yZS9saWIvaGVscGVycy1pbnRlcm5hbCc7XG5pbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tICdjb25zdHJ1Y3RzJztcbmltcG9ydCB7IEJkYUJsdWVwcmludExhbWJkYSB9IGZyb20gJy4vYmRhLWJsdWVwcmludC1sYW1iZGEnO1xuaW1wb3J0IHsgQmRhRGF0YVByb2Nlc3NpbmdMYW1iZGEgfSBmcm9tICcuL2JkYS1kYXRhLXByb2Nlc3NpbmctbGFtYmRhJztcbmltcG9ydCB7IEJkYVByb2plY3RMYW1iZGEgfSBmcm9tICcuL2JkYS1wcm9qZWN0LWxhbWJkYSc7XG5pbXBvcnQgeyBCZGFSZXN1bHRzYW1iZGEgfSBmcm9tICcuL2JkYS1yZXN1bHRzLWxhbWJkYSc7XG5pbXBvcnQgeyBCYXNlQ2xhc3MgfSBmcm9tICcuLi8uLi8uLi9jb21tb24vYmFzZS1jbGFzcyc7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqICAgICAgICAgICAgICAgICAgICAgICAgUFJPUFMgRk9SIE5FVyBDT05TVFJVQ1RcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKlxuICogUHJvcGVydGllcyBmb3IgY3JlYXRpbmcgYSBDREsgQkRBIGNvbnN0cnVjdC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCZWRyb2NrRGF0YUF1dG9tYXRpb25Qcm9wcyB7XG4gIC8qKlxuICAgKiAtIE9wdGlvbmFsLiBUaGUgUzMgYnVja2V0XG4gICAqIGZvciBpbnB1dCBkYXRhIHVzZWQgYnkgdGhlIEJlZHJvY2sgRGF0YSBBdXRvbWF0aW9uIHByb2Nlc3MuXG4gICAqIElmIG5vdCBwcm92aWRlZCwgYSBuZXcgYnVja2V0IHdpbGwgYmUgY3JlYXRlZC5cbiAgICovXG4gIHJlYWRvbmx5IGlucHV0QnVja2V0PzogczMuSUJ1Y2tldDtcbiAgLyoqXG4gICAqIC0gT3B0aW9uYWwuIFRoZSBTMyBidWNrZXQgZm9yIHN0b3JpbmdcbiAgICogb3V0cHV0IGZpbGVzIGdlbmVyYXRlZCBieSB0aGUgQmVkcm9jayBEYXRhIEF1dG9tYXRpb24gcHJvY2Vzcy5cbiAgICovXG4gIHJlYWRvbmx5IG91dHB1dEJ1Y2tldD86IHMzLklCdWNrZXQ7XG4gIC8qKlxuICAgKiAtIE9wdGlvbmFsLiBJbmRpY2F0ZXMgd2hldGhlciBhIGN1c3RvbVxuICAgKiBCZWRyb2NrIERhdGEgQXV0b21hdGlvbiBibHVlcHJpbnQgaXMgcmVxdWlyZWQuIElmIHRydWUsIHRoZSBuZWNlc3NhcnkgcmVzb3VyY2VzIHdpbGwgYmUgY3JlYXRlZC5cbiAgICpcbiAgICogQGRlZmF1bHQgLSBmYWxzZVxuICAgKi9cbiAgcmVhZG9ubHkgaXNDdXN0b21CREFCbHVlcHJpbnRSZXF1aXJlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKiAtIE9wdGlvbmFsLiBJbmRpY2F0ZXMgd2hldGhlciBhIEJlZHJvY2sgRGF0YVxuICAgKiBBdXRvbWF0aW9uIHByb2plY3QgaXMgcmVxdWlyZWQuIElmIHRydWUsIHRoZSBuZWNlc3NhcnkgcmVzb3VyY2VzIHdpbGwgYmUgY3JlYXRlZC5cbiAgICpcbiAgICogQGRlZmF1bHQgLSBmYWxzZVxuICAgKi9cbiAgcmVhZG9ubHkgaXNCREFQcm9qZWN0UmVxdWlyZWQ/OiBib29sZWFuO1xuICAvKipcbiAgICogLSBPcHRpb25hbC4gSW5kaWNhdGVzIHdoZXRoZXIgYSBCZWRyb2NrIERhdGFcbiAgICogQXV0b21hdGlvbiBpbnZvY2F0aW9uIGlzIHJlcXVpcmVkLiBJZiB0cnVlLCB0aGUgbmVjZXNzYXJ5IHJlc291cmNlcyB3aWxsIGJlIGNyZWF0ZWQuXG4gICAqXG4gICAqIEBkZWZhdWx0IC0gZmFsc2VcbiAgICovXG4gIHJlYWRvbmx5IGlzQkRBSW52b2NhdGlvblJlcXVpcmVkPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIC0gT3B0aW9uYWwuIEluZGljYXRlcyB3aGV0aGVyIHRoZSBzdGF0dXMgb2YgdGhlXG4gICAqIEJlZHJvY2sgRGF0YSBBdXRvbWF0aW9uIHByb2Nlc3MgaXMgcmVxdWlyZWQuIElmIHRydWUsIHRoZSBuZWNlc3NhcnkgcmVzb3VyY2VzIHdpbGwgYmUgY3JlYXRlZC5cbiAgICpcbiAgICogQGRlZmF1bHQgLSBmYWxzZVxuICAgKi9cbiAgcmVhZG9ubHkgaXNTdGF0dXNSZXF1aXJlZD86IGJvb2xlYW47XG59O1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIE5FVyBDT05TVFJVQ1QgREVGSU5JVElPTlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqXG4gKiBDbGFzcyB0byBjcmVhdGUgYSBCREEgcGF0dGVybiB3aXRoIENESy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJlZHJvY2tEYXRhQXV0b21hdGlvbiBleHRlbmRzIEJhc2VDbGFzcyB7XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBBdHRyaWJ1dGVzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvKipcbiAgICogVGhlIFMzIGJ1Y2tldCBmb3IgaW5wdXQgZGF0YSB1c2VkIGJ5IHRoZSBCZWRyb2NrIERhdGEgQXV0b21hdGlvbiBwcm9jZXNzLlxuICAgKiBJTVBPUlRBTlQ6IElmIGlzQ3VzdG9tQkRBQmx1ZXByaW50UmVxdWlyZWQgb3IgaXNCREFJbnZvY2F0aW9uUmVxdWlyZWQgYXJlIHNldCB0byBmYWxzZSBpbiBQYXR0ZXJuIENvbnN0cnVjdCBQcm9wcyxcbiAgICogdGhpcyBwcm9wZXJ0eSB3aWxsIGJlIHVuZGVmaW5lZFxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IGJkYUlucHV0QnVja2V0PzogczMuSUJ1Y2tldDtcbiAgLyoqXG4gICAqIFRoZSBTMyBidWNrZXQgZm9yIG91dHB1dCBkYXRhIGdlbmVyYXRlZCBieSB0aGUgQmVkcm9jayBEYXRhIEF1dG9tYXRpb24gcHJvY2Vzcy5cbiAgICogSU1QT1JUQU5UOiBJZiBpc0JEQUludm9jYXRpb25SZXF1aXJlZCBpcyBzZXQgdG8gZmFsc2UgaW4gUGF0dGVybiBDb25zdHJ1Y3QgUHJvcHMsXG4gICAqIHRoaXMgcHJvcGVydHkgd2lsbCBiZSB1bmRlZmluZWRcbiAgICovXG4gIHB1YmxpYyByZWFkb25seSBiZGFPdXRwdXRCdWNrZXQ/OiBzMy5JQnVja2V0O1xuICAvKipcbiAgICogVGhlIExhbWJkYSBmdW5jdGlvbiByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIEJlZHJvY2sgRGF0YSBBdXRvbWF0aW9uIGJsdWVwcmludC5cbiAgICogSU1QT1JUQU5UOiBJZiBpc0N1c3RvbUJEQUJsdWVwcmludFJlcXVpcmVkIGlzIHNldCB0byBmYWxzZSBpbiBQYXR0ZXJuIENvbnN0cnVjdCBQcm9wcyxcbiAgICogdGhpcyBwcm9wZXJ0eSB3aWxsIGJlIHVuZGVmaW5lZFxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IGJkYUJsdWVwcmludExhbWJkYUZ1bmN0aW9uPzogbGFtYmRhLkZ1bmN0aW9uO1xuICAvKipcbiAgICogVGhlIExhbWJkYSBmdW5jdGlvbiByZXNwb25zaWJsZSBmb3IgaGFuZGxpbmcgdGhlIEJlZHJvY2sgRGF0YSBBdXRvbWF0aW9uIHByb2plY3QuXG4gICAqIElNUE9SVEFOVDogSWYgaXNCREFQcm9qZWN0UmVxdWlyZWQgaXMgc2V0IHRvIGZhbHNlIGluIFBhdHRlcm4gQ29uc3RydWN0IFByb3BzLFxuICAgKiB0aGlzIHByb3BlcnR5IHdpbGwgYmUgdW5kZWZpbmVkXG4gICAqL1xuICBwdWJsaWMgcmVhZG9ubHkgYmRhUHJvamVjdEZ1bmN0aW9uPzogbGFtYmRhLkZ1bmN0aW9uO1xuICAvKipcbiAgICogVGhlIExhbWJkYSBmdW5jdGlvbiByZXNwb25zaWJsZSBmb3IgaW52b2tpbmcgdGhlIEJlZHJvY2sgRGF0YSBBdXRvbWF0aW9uIHByb2Nlc3MuXG4gICAqIElNUE9SVEFOVDogSWYgaXNCREFJbnZvY2F0aW9uUmVxdWlyZWQgaXMgc2V0IHRvIGZhbHNlIGluIFBhdHRlcm4gQ29uc3RydWN0IFByb3BzLFxuICAgKiB0aGlzIHByb3BlcnR5IHdpbGwgYmUgdW5kZWZpbmVkXG4gICAqL1xuICBwdWJsaWMgcmVhZG9ubHkgYmRhSW52b2NhdGlvbkZ1bmN0aW9uPzogbGFtYmRhLkZ1bmN0aW9uO1xuICAvKipcbiAgICogVGhlIExhbWJkYSBmdW5jdGlvbiByZXNwb25zaWJsZSBmb3IgY2hlY2tpbmcgdGhlIHN0YXR1cyBvZiB0aGUgQmVkcm9jayBEYXRhIEF1dG9tYXRpb24gcHJvY2Vzcy5cbiAgICogSU1QT1JUQU5UOiBJZiBpc1N0YXR1c1JlcXVpcmVkIGlzIHNldCB0byBmYWxzZSBpbiBQYXR0ZXJuIENvbnN0cnVjdCBQcm9wcyxcbiAgICogdGhpcyBwcm9wZXJ0eSB3aWxsIGJlIHVuZGVmaW5lZFxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IGJkYVJlc3VsdFN0YXR1c0Z1bmN0aW9uPzogbGFtYmRhLkZ1bmN0aW9uO1xuICAvKipcbiAgICogVGhlIEFXUyBMYW1iZGEgUG93ZXJ0b29scyBsYXllciB1c2VkIGluIHRoZSBMYW1iZGEgZnVuY3Rpb25zLlxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IHBvd2VydG9vbHNMYXllcjogbGFtYmRhLklMYXllclZlcnNpb247XG4gIC8qKlxuICAgKiBUaGUgQm90bzMgbGF5ZXIgdXNlZCBpbiB0aGUgTGFtYmRhIGZ1bmN0aW9ucyBmb3IgQVdTIFNESyBpbnRlcmFjdGlvbnMuXG4gICAqL1xuICBwdWJsaWMgcmVhZG9ubHkgYm90bzNMYXllcjogbGFtYmRhLkxheWVyVmVyc2lvbjtcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIENPTlNUUlVDVE9SXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb25zdHJ1Y3RvcihzY29wZTogQ29uc3RydWN0LCBpZDogc3RyaW5nLCBwcm9wczogQmVkcm9ja0RhdGFBdXRvbWF0aW9uUHJvcHMpIHtcbiAgICBzdXBlcihzY29wZSwgaWQpO1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gU2V0IHByb3BlcnRpZXMgYW5kIGRlZmF1bHRzXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgdGhpcy5wb3dlcnRvb2xzTGF5ZXIgPSBsYW1iZGEuTGF5ZXJWZXJzaW9uLmZyb21MYXllclZlcnNpb25Bcm4odGhpcywgJ1Bvd2VydG9vbHNMYXllcicsXG4gICAgICBgYXJuOmF3czpsYW1iZGE6JHtjZGsuU3RhY2sub2YodGhpcykucmVnaW9ufTowMTcwMDA4MDE0NDY6bGF5ZXI6QVdTTGFtYmRhUG93ZXJ0b29sc1B5dGhvblYzLXB5dGhvbjMxMy14ODZfNjQ6OGAsXG4gICAgKTtcblxuICAgIHRoaXMuYm90bzNMYXllciA9IG5ldyBQeXRob25MYXllclZlcnNpb24odGhpcywgJ0JvdG8zTGF5ZXInLCB7XG4gICAgICBlbnRyeTogcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uLy4uLy4uLy4uL2xheWVyJyksXG4gICAgICBjb21wYXRpYmxlUnVudGltZXM6IFtsYW1iZGEuUnVudGltZS5QWVRIT05fM18xM10sXG4gICAgICBkZXNjcmlwdGlvbjogJ0xhdGVzdCBib3RvMyBsYXllciBmb3IgQmVkcm9jayBEYXRhIEF1dG9tYXRpb24nLFxuICAgICAgcmVtb3ZhbFBvbGljeTogY2RrLlJlbW92YWxQb2xpY3kuREVTVFJPWSxcbiAgICB9KTtcblxuICAgIC8vIENvbXB1dGUgaGFzaCB1c2VkIGZvciBidWNrZXQgbmFtZVxuICAgIGNvbnN0IGhhc2ggPSBtZDVoYXNoKGlkICsgQXdzLkFDQ09VTlRfSUQgKyBBd3MuUkVHSU9OKTtcblxuICAgIC8vIE1hbmFnZSBpbnB1dCBidWNrZXQgaWYgbmVlZGVkXG4gICAgaWYgKHByb3BzLmlzQ3VzdG9tQkRBQmx1ZXByaW50UmVxdWlyZWQgfHwgcHJvcHMuaXNCREFJbnZvY2F0aW9uUmVxdWlyZWQpIHt0aGlzLmJkYUlucHV0QnVja2V0ID0gdGhpcy5oYW5kbGVTM0J1Y2tldChwcm9wcy5pbnB1dEJ1Y2tldCwgJ2lucHV0JywgaGFzaCk7fVxuXG4gICAgLy8gTWFuYWdlIG91dHB1dCBidWNrZXQgaWYgbmVlZGVkXG4gICAgaWYgKHByb3BzLmlzQ3VzdG9tQkRBQmx1ZXByaW50UmVxdWlyZWQgfHwgcHJvcHMuaXNCREFJbnZvY2F0aW9uUmVxdWlyZWQpIHt0aGlzLmJkYU91dHB1dEJ1Y2tldCA9IHRoaXMuaGFuZGxlUzNCdWNrZXQocHJvcHMub3V0cHV0QnVja2V0LCAnb3V0cHV0JywgaGFzaCk7fVxuXG4gICAgaWYgKHByb3BzLmlzQ3VzdG9tQkRBQmx1ZXByaW50UmVxdWlyZWQgJiYgdGhpcy5iZGFJbnB1dEJ1Y2tldCkge1xuICAgICAgdGhpcy5iZGFCbHVlcHJpbnRMYW1iZGFGdW5jdGlvbiA9IG5ldyBCZGFCbHVlcHJpbnRMYW1iZGEodGhpcywgJ2JkYWJsdWVwcmludGxhbWJkYScsIHtcbiAgICAgICAgaW5wdXRCdWNrZXQ6IHRoaXMuYmRhSW5wdXRCdWNrZXQsXG4gICAgICAgIGxhbWJkYUxheWVyczogW3RoaXMucG93ZXJ0b29sc0xheWVyLCB0aGlzLmJvdG8zTGF5ZXJdLFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChwcm9wcy5pc0JEQVByb2plY3RSZXF1aXJlZCAmJiB0aGlzLmJkYUlucHV0QnVja2V0KSB7XG4gICAgICB0aGlzLmJkYVByb2plY3RGdW5jdGlvbiA9IG5ldyBCZGFQcm9qZWN0TGFtYmRhKHRoaXMsICdiZGFwcm9qZWN0bGFtYmRhJywge1xuICAgICAgICBpbnB1dEJ1Y2tldDogdGhpcy5iZGFJbnB1dEJ1Y2tldCxcbiAgICAgICAgbGFtYmRhTGF5ZXJzOiBbdGhpcy5wb3dlcnRvb2xzTGF5ZXIsIHRoaXMuYm90bzNMYXllcl0sXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHByb3BzLmlzQkRBSW52b2NhdGlvblJlcXVpcmVkICYmIHRoaXMuYmRhSW5wdXRCdWNrZXQgJiYgdGhpcy5iZGFPdXRwdXRCdWNrZXQpIHtcbiAgICAgIHRoaXMuYmRhSW52b2NhdGlvbkZ1bmN0aW9uID0gbmV3IEJkYURhdGFQcm9jZXNzaW5nTGFtYmRhKHRoaXMsICdiZGFpbnZvY2F0aW9ubGFtYmRhJywge1xuICAgICAgICBpbnB1dEJ1Y2tldDogdGhpcy5iZGFJbnB1dEJ1Y2tldCxcbiAgICAgICAgb3V0cHV0QnVja2V0OiB0aGlzLmJkYU91dHB1dEJ1Y2tldCxcbiAgICAgICAgbGFtYmRhTGF5ZXJzOiBbdGhpcy5wb3dlcnRvb2xzTGF5ZXIsIHRoaXMuYm90bzNMYXllcl0sXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHByb3BzLmlzU3RhdHVzUmVxdWlyZWQgJiYgdGhpcy5iZGFPdXRwdXRCdWNrZXQpIHtcbiAgICAgIHRoaXMuYmRhUmVzdWx0U3RhdHVzRnVuY3Rpb24gPSBuZXcgQmRhUmVzdWx0c2FtYmRhKHRoaXMsICdiZGFyZXN1bHRzbGFtYmRhJywge1xuICAgICAgICBsYW1iZGFMYXllcnM6IFt0aGlzLnBvd2VydG9vbHNMYXllciwgdGhpcy5ib3RvM0xheWVyXSxcbiAgICAgICAgb3V0cHV0QnVja2V0OiB0aGlzLmJkYU91dHB1dEJ1Y2tldCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBjcmVhdGlvbiBvciByZXRyaWV2YWwgb2YgYW4gUzMgYnVja2V0LlxuICAgKlxuICAgKiBAcGFyYW0gZXhpc3RpbmdfYnVja2V0IC0gQW4gb3B0aW9uYWwgZXhpc3RpbmcgUzMgYnVja2V0IHRvIHVzZS5cbiAgICogQHBhcmFtIHR5cGUgLSBBIHN0cmluZyBpbmRpY2F0aW5nIHRoZSB0eXBlIG9mIGJ1Y2tldCAoZS5nLiwgJ2lucHV0JyBvciAnb3V0cHV0JykuXG4gICAqIEByZXR1cm5zIFRoZSBleGlzdGluZyBidWNrZXQgaWYgcHJvdmlkZWQsIG9yIGEgbmV3bHkgY3JlYXRlZCBTMyBidWNrZXQuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVMzQnVja2V0KGV4aXN0aW5nX2J1Y2tldDogczMuSUJ1Y2tldCB8IHVuZGVmaW5lZCwgdHlwZTogc3RyaW5nLCBoYXNoOiBzdHJpbmcpOiBzMy5JQnVja2V0IHtcblxuICAgIGlmIChleGlzdGluZ19idWNrZXQpIHtcbiAgICAgIHJldHVybiBleGlzdGluZ19idWNrZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGJ1Y2tldCBmb3Igc3RvcmluZyBzZXJ2ZXIgYWNjZXNzIGxvZ2dpbmdcbiAgICAgIGNvbnN0IHNlcnZlckFjY2Vzc0xvZ0J1Y2tldCA9IG5ldyBzMy5CdWNrZXQoXG4gICAgICAgIHRoaXMsXG4gICAgICAgIGAke2hhc2h9LSR7dHlwZX0tc2VydmVyYWNjZXNzbG9nYnVja2V0YCxcbiAgICAgICAge1xuICAgICAgICAgIGJsb2NrUHVibGljQWNjZXNzOiBzMy5CbG9ja1B1YmxpY0FjY2Vzcy5CTE9DS19BTEwsXG4gICAgICAgICAgZW5jcnlwdGlvbjogczMuQnVja2V0RW5jcnlwdGlvbi5TM19NQU5BR0VELFxuICAgICAgICAgIGVuZm9yY2VTU0w6IHRydWUsXG4gICAgICAgICAgdmVyc2lvbmVkOiB0cnVlLFxuICAgICAgICAgIGxpZmVjeWNsZVJ1bGVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGV4cGlyYXRpb246IGNkay5EdXJhdGlvbi5kYXlzKDkwKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIC8vIGNyZWF0ZSB0aGUgYnVja2V0XG4gICAgICByZXR1cm4gbmV3IHMzLkJ1Y2tldCh0aGlzLCBgJHtoYXNofS0ke3R5cGV9LWJ1Y2tldGAsIHtcbiAgICAgICAgZW5jcnlwdGlvbjogczMuQnVja2V0RW5jcnlwdGlvbi5TM19NQU5BR0VELFxuICAgICAgICBlbmZvcmNlU1NMOiB0cnVlLFxuICAgICAgICBibG9ja1B1YmxpY0FjY2VzczogczMuQmxvY2tQdWJsaWNBY2Nlc3MuQkxPQ0tfQUxMLFxuICAgICAgICB2ZXJzaW9uZWQ6IHRydWUsXG4gICAgICAgIHNlcnZlckFjY2Vzc0xvZ3NCdWNrZXQ6IHNlcnZlckFjY2Vzc0xvZ0J1Y2tldCxcbiAgICAgICAgc2VydmVyQWNjZXNzTG9nc1ByZWZpeDogYCR7dHlwZX0tYnVja2V0LWxvZ3MvYCxcbiAgICAgICAgb2JqZWN0T3duZXJzaGlwOiBzMy5PYmplY3RPd25lcnNoaXAuQlVDS0VUX09XTkVSX0VORk9SQ0VELFxuICAgICAgICByZW1vdmFsUG9saWN5OiBjZGsuUmVtb3ZhbFBvbGljeS5ERVNUUk9ZLFxuICAgICAgICBhdXRvRGVsZXRlT2JqZWN0czogdHJ1ZSxcbiAgICAgICAgY29yczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGFsbG93ZWRNZXRob2RzOiBbXG4gICAgICAgICAgICAgIHMzLkh0dHBNZXRob2RzLkdFVCxcbiAgICAgICAgICAgICAgczMuSHR0cE1ldGhvZHMuUE9TVCxcbiAgICAgICAgICAgICAgczMuSHR0cE1ldGhvZHMuUFVULFxuICAgICAgICAgICAgICBzMy5IdHRwTWV0aG9kcy5ERUxFVEUsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYWxsb3dlZE9yaWdpbnM6IFsnKiddLFxuICAgICAgICAgICAgYWxsb3dlZEhlYWRlcnM6IFsnKiddLFxuICAgICAgICAgICAgZXhwb3NlZEhlYWRlcnM6IFsneC1hbXotc2VydmVyLXNpZGUtZW5jcnlwdGlvbicsXG4gICAgICAgICAgICAgICd4LWFtei1yZXF1ZXN0LWlkJyxcbiAgICAgICAgICAgICAgJ3gtYW16LWlkLTInLFxuICAgICAgICAgICAgICAnRVRhZycsXG4gICAgICAgICAgICAgICdDb250ZW50LVR5cGUnLFxuICAgICAgICAgICAgICAnQ29udGVudC1EaXNwb3NpdGlvbicsXG4gICAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nXSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iXX0=