"use strict";
/**
 *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License"). You may not use this file except in compliance
 *  with the License. A copy of the License is located at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  or in the 'license' file accompanying this file. This file is distributed on an 'AS IS' BASIS, WITHOUT WARRANTIES
 *  OR CONDITIONS OF ANY KIND, express or implied. See the License for the specific language governing permissions
 *  and limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.BedrockBatchSfnLambdaCode = void 0;
const path = require("node:path");
const aws_cdk_lib_1 = require("aws-cdk-lib");
/**
 * Lambda code for the AWS Bedrock Batch Inference Job.
 *
 * Separated from the main code to only build once.
 */
class BedrockBatchSfnLambdaCode {
    static getOrCreate() {
        if (!BedrockBatchSfnLambdaCode.instance) {
            const lambdaPath = path.join(__dirname, '../../../../lambda/aws-bedrock-batch-stepfn');
            BedrockBatchSfnLambdaCode.instance = aws_cdk_lib_1.aws_lambda.Code.fromDockerBuild(lambdaPath);
        }
        return BedrockBatchSfnLambdaCode.instance;
    }
}
exports.BedrockBatchSfnLambdaCode = BedrockBatchSfnLambdaCode;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmVkcm9jay1iYXRjaC1zZm4tbGFtYmRhLWNvZGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvcGF0dGVybnMvZ2VuLWFpL2F3cy1iZWRyb2NrLWJhdGNoLXN0ZXBmbi9iZWRyb2NrLWJhdGNoLXNmbi1sYW1iZGEtY29kZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7O0dBV0c7OztBQUVILGtDQUFrQztBQUNsQyw2Q0FBbUQ7QUFFbkQ7Ozs7R0FJRztBQUNILE1BQWEseUJBQXlCO0lBQzdCLE1BQU0sQ0FBQyxXQUFXO1FBQ3ZCLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUN4QyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSw2Q0FBNkMsQ0FBQyxDQUFDO1lBQ3ZGLHlCQUF5QixDQUFDLFFBQVEsR0FBRyx3QkFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDL0UsQ0FBQztRQUNELE9BQU8seUJBQXlCLENBQUMsUUFBUSxDQUFDO0lBQzVDLENBQUM7Q0FHRjtBQVZELDhEQVVDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiAgQ29weXJpZ2h0IEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIikuIFlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqICB3aXRoIHRoZSBMaWNlbnNlLiBBIGNvcHkgb2YgdGhlIExpY2Vuc2UgaXMgbG9jYXRlZCBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogIG9yIGluIHRoZSAnbGljZW5zZScgZmlsZSBhY2NvbXBhbnlpbmcgdGhpcyBmaWxlLiBUaGlzIGZpbGUgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTXG4gKiAgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcbiAqICBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdub2RlOnBhdGgnO1xuaW1wb3J0IHsgYXdzX2xhbWJkYSBhcyBsYW1iZGEgfSBmcm9tICdhd3MtY2RrLWxpYic7XG5cbi8qKlxuICogTGFtYmRhIGNvZGUgZm9yIHRoZSBBV1MgQmVkcm9jayBCYXRjaCBJbmZlcmVuY2UgSm9iLlxuICpcbiAqIFNlcGFyYXRlZCBmcm9tIHRoZSBtYWluIGNvZGUgdG8gb25seSBidWlsZCBvbmNlLlxuICovXG5leHBvcnQgY2xhc3MgQmVkcm9ja0JhdGNoU2ZuTGFtYmRhQ29kZSB7XG4gIHB1YmxpYyBzdGF0aWMgZ2V0T3JDcmVhdGUoKTogbGFtYmRhLkNvZGUge1xuICAgIGlmICghQmVkcm9ja0JhdGNoU2ZuTGFtYmRhQ29kZS5pbnN0YW5jZSkge1xuICAgICAgY29uc3QgbGFtYmRhUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi8uLi8uLi8uLi9sYW1iZGEvYXdzLWJlZHJvY2stYmF0Y2gtc3RlcGZuJyk7XG4gICAgICBCZWRyb2NrQmF0Y2hTZm5MYW1iZGFDb2RlLmluc3RhbmNlID0gbGFtYmRhLkNvZGUuZnJvbURvY2tlckJ1aWxkKGxhbWJkYVBhdGgpO1xuICAgIH1cbiAgICByZXR1cm4gQmVkcm9ja0JhdGNoU2ZuTGFtYmRhQ29kZS5pbnN0YW5jZTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBsYW1iZGEuQ29kZTtcbn0iXX0=